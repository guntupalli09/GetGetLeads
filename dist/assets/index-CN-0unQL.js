import{r as o,b as vt,u as we,L as P,d as St,e as kt,f as q,N as ke,B as Ct}from"./vendor-BYDZGNsX.js";import{c as Et}from"./supabase-CId9ICzf.js";import{A as qe,Z as ne,a as et,B as Oe,F as ve,U as V,S as le,b as Ae,c as _t,L as At,d as Dt,X,e as It,M as Re,P as Rt,f as Tt,C as Ke,T as tt,g as ce,D as te,h as M,i as A,R as I,j as se,k as K,Y as B,l as R,m as Z,n as be,o as Te,p as xe,q as he,r as oe,s as st,t as H,u as at,v as pe,w as Pt,x as Be,y as De,z as F,E as rt,G as it,H as Ft,I as $t,J as Lt,K as Ot,N as Ue,O as Ne,Q as Mt,V as zt,W as qt,_ as Kt,$ as He,a0 as nt,a1 as Bt,a2 as Ut,a3 as Vt,a4 as ue,a5 as Ht,a6 as je,a7 as Wt,a8 as We,a9 as Gt,aa as Jt,ab as Yt,ac as Xt,ad as Zt,ae as Qt,af as es,ag as ts,ah as ss,ai as as,aj as rs,ak as is,al as ns,am as ls,an as cs,ao as os}from"./ui-DH5lkbSG.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))h(m);new MutationObserver(m=>{for(const n of m)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function s(m){const n={};return m.integrity&&(n.integrity=m.integrity),m.referrerPolicy&&(n.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?n.credentials="include":m.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(m){if(m.ep)return;m.ep=!0;const n=s(m);fetch(m.href,n)}})();var lt={exports:{}},Pe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=o,ms=Symbol.for("react.element"),xs=Symbol.for("react.fragment"),hs=Object.prototype.hasOwnProperty,us=ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ps={key:!0,ref:!0,__self:!0,__source:!0};function ct(t,a,s){var h,m={},n=null,u=null;s!==void 0&&(n=""+s),a.key!==void 0&&(n=""+a.key),a.ref!==void 0&&(u=a.ref);for(h in a)hs.call(a,h)&&!ps.hasOwnProperty(h)&&(m[h]=a[h]);if(t&&t.defaultProps)for(h in a=t.defaultProps,a)m[h]===void 0&&(m[h]=a[h]);return{$$typeof:ms,type:t,key:n,ref:u,props:m,_owner:us.current}}Pe.Fragment=xs;Pe.jsx=ct;Pe.jsxs=ct;lt.exports=Pe;var e=lt.exports,ot,Ge=vt;ot=Ge.createRoot,Ge.hydrateRoot;let gs={data:""},fs=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||gs,js=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ys=/\/\*[^]*?\*\/|  +/g,Je=/\n+/g,ee=(t,a)=>{let s="",h="",m="";for(let n in t){let u=t[n];n[0]=="@"?n[1]=="i"?s=n+" "+u+";":h+=n[1]=="f"?ee(u,n):n+"{"+ee(u,n[1]=="k"?"":a)+"}":typeof u=="object"?h+=ee(u,a?a.replace(/([^,])+/g,x=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,x):x?x+" "+d:d)):n):u!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),m+=ee.p?ee.p(n,u):n+":"+u+";")}return s+(a&&m?a+"{"+m+"}":m)+h},J={},dt=t=>{if(typeof t=="object"){let a="";for(let s in t)a+=s+dt(t[s]);return a}return t},bs=(t,a,s,h,m)=>{let n=dt(t),u=J[n]||(J[n]=(d=>{let l=0,g=11;for(;l<d.length;)g=101*g+d.charCodeAt(l++)>>>0;return"go"+g})(n));if(!J[u]){let d=n!==t?t:(l=>{let g,j,c=[{}];for(;g=js.exec(l.replace(ys,""));)g[4]?c.shift():g[3]?(j=g[3].replace(Je," ").trim(),c.unshift(c[0][j]=c[0][j]||{})):c[0][g[1]]=g[2].replace(Je," ").trim();return c[0]})(t);J[u]=ee(m?{["@keyframes "+u]:d}:d,s?"":"."+u)}let x=s&&J.g?J.g:null;return s&&(J.g=J[u]),((d,l,g,j)=>{j?l.data=l.data.replace(j,d):l.data.indexOf(d)===-1&&(l.data=g?d+l.data:l.data+d)})(J[u],a,h,x),u},Ns=(t,a,s)=>t.reduce((h,m,n)=>{let u=a[n];if(u&&u.call){let x=u(s),d=x&&x.props&&x.props.className||/^go/.test(x)&&x;u=d?"."+d:x&&typeof x=="object"?x.props?"":ee(x,""):x===!1?"":x}return h+m+(u??"")},"");function Fe(t){let a=this||{},s=t.call?t(a.p):t;return bs(s.unshift?s.raw?Ns(s,[].slice.call(arguments,1),a.p):s.reduce((h,m)=>Object.assign(h,m&&m.call?m(a.p):m),{}):s,fs(a.target),a.g,a.o,a.k)}let mt,Me,ze;Fe.bind({g:1});let Q=Fe.bind({k:1});function ws(t,a,s,h){ee.p=a,mt=t,Me=s,ze=h}function ae(t,a){let s=this||{};return function(){let h=arguments;function m(n,u){let x=Object.assign({},n),d=x.className||m.className;s.p=Object.assign({theme:Me&&Me()},x),s.o=/ *go\d+/.test(d),x.className=Fe.apply(s,h)+(d?" "+d:"");let l=t;return t[0]&&(l=x.as||t,delete x.as),ze&&l[0]&&ze(x),mt(l,x)}return m}}var vs=t=>typeof t=="function",Ie=(t,a)=>vs(t)?t(a):t,Ss=(()=>{let t=0;return()=>(++t).toString()})(),xt=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let a=matchMedia("(prefers-reduced-motion: reduce)");t=!a||a.matches}return t}})(),ks=20,ht=(t,a)=>{switch(a.type){case 0:return{...t,toasts:[a.toast,...t.toasts].slice(0,ks)};case 1:return{...t,toasts:t.toasts.map(n=>n.id===a.toast.id?{...n,...a.toast}:n)};case 2:let{toast:s}=a;return ht(t,{type:t.toasts.find(n=>n.id===s.id)?1:0,toast:s});case 3:let{toastId:h}=a;return{...t,toasts:t.toasts.map(n=>n.id===h||h===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return a.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==a.toastId)};case 5:return{...t,pausedAt:a.time};case 6:let m=a.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+m}))}}},Ee=[],_e={toasts:[],pausedAt:void 0},de=t=>{_e=ht(_e,t),Ee.forEach(a=>{a(_e)})},Cs={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Es=(t={})=>{let[a,s]=o.useState(_e);o.useEffect(()=>(Ee.push(s),()=>{let m=Ee.indexOf(s);m>-1&&Ee.splice(m,1)}),[a]);let h=a.toasts.map(m=>{var n,u,x;return{...t,...t[m.type],...m,removeDelay:m.removeDelay||((n=t[m.type])==null?void 0:n.removeDelay)||(t==null?void 0:t.removeDelay),duration:m.duration||((u=t[m.type])==null?void 0:u.duration)||(t==null?void 0:t.duration)||Cs[m.type],style:{...t.style,...(x=t[m.type])==null?void 0:x.style,...m.style}}});return{...a,toasts:h}},_s=(t,a="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:a,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||Ss()}),Se=t=>(a,s)=>{let h=_s(a,t,s);return de({type:2,toast:h}),h.id},L=(t,a)=>Se("blank")(t,a);L.error=Se("error");L.success=Se("success");L.loading=Se("loading");L.custom=Se("custom");L.dismiss=t=>{de({type:3,toastId:t})};L.remove=t=>de({type:4,toastId:t});L.promise=(t,a,s)=>{let h=L.loading(a.loading,{...s,...s==null?void 0:s.loading});return typeof t=="function"&&(t=t()),t.then(m=>{let n=a.success?Ie(a.success,m):void 0;return n?L.success(n,{id:h,...s,...s==null?void 0:s.success}):L.dismiss(h),m}).catch(m=>{let n=a.error?Ie(a.error,m):void 0;n?L.error(n,{id:h,...s,...s==null?void 0:s.error}):L.dismiss(h)}),t};var As=(t,a)=>{de({type:1,toast:{id:t,height:a}})},Ds=()=>{de({type:5,time:Date.now()})},ye=new Map,Is=1e3,Rs=(t,a=Is)=>{if(ye.has(t))return;let s=setTimeout(()=>{ye.delete(t),de({type:4,toastId:t})},a);ye.set(t,s)},Ts=t=>{let{toasts:a,pausedAt:s}=Es(t);o.useEffect(()=>{if(s)return;let n=Date.now(),u=a.map(x=>{if(x.duration===1/0)return;let d=(x.duration||0)+x.pauseDuration-(n-x.createdAt);if(d<0){x.visible&&L.dismiss(x.id);return}return setTimeout(()=>L.dismiss(x.id),d)});return()=>{u.forEach(x=>x&&clearTimeout(x))}},[a,s]);let h=o.useCallback(()=>{s&&de({type:6,time:Date.now()})},[s]),m=o.useCallback((n,u)=>{let{reverseOrder:x=!1,gutter:d=8,defaultPosition:l}=u||{},g=a.filter(r=>(r.position||l)===(n.position||l)&&r.height),j=g.findIndex(r=>r.id===n.id),c=g.filter((r,i)=>i<j&&r.visible).length;return g.filter(r=>r.visible).slice(...x?[c+1]:[0,c]).reduce((r,i)=>r+(i.height||0)+d,0)},[a]);return o.useEffect(()=>{a.forEach(n=>{if(n.dismissed)Rs(n.id,n.removeDelay);else{let u=ye.get(n.id);u&&(clearTimeout(u),ye.delete(n.id))}})},[a]),{toasts:a,handlers:{updateHeight:As,startPause:Ds,endPause:h,calculateOffset:m}}},Ps=Q`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Fs=Q`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$s=Q`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ls=ae("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ps} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Fs} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${$s} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Os=Q`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ms=ae("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Os} 1s linear infinite;
`,zs=Q`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qs=Q`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ks=ae("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zs} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qs} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Bs=ae("div")`
  position: absolute;
`,Us=ae("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Vs=Q`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Hs=ae("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Vs} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ws=({toast:t})=>{let{icon:a,type:s,iconTheme:h}=t;return a!==void 0?typeof a=="string"?o.createElement(Hs,null,a):a:s==="blank"?null:o.createElement(Us,null,o.createElement(Ms,{...h}),s!=="loading"&&o.createElement(Bs,null,s==="error"?o.createElement(Ls,{...h}):o.createElement(Ks,{...h})))},Gs=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Js=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Ys="0%{opacity:0;} 100%{opacity:1;}",Xs="0%{opacity:1;} 100%{opacity:0;}",Zs=ae("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Qs=ae("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ea=(t,a)=>{let s=t.includes("top")?1:-1,[h,m]=xt()?[Ys,Xs]:[Gs(s),Js(s)];return{animation:a?`${Q(h)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Q(m)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ta=o.memo(({toast:t,position:a,style:s,children:h})=>{let m=t.height?ea(t.position||a||"top-center",t.visible):{opacity:0},n=o.createElement(Ws,{toast:t}),u=o.createElement(Qs,{...t.ariaProps},Ie(t.message,t));return o.createElement(Zs,{className:t.className,style:{...m,...s,...t.style}},typeof h=="function"?h({icon:n,message:u}):o.createElement(o.Fragment,null,n,u))});ws(o.createElement);var sa=({id:t,className:a,style:s,onHeightUpdate:h,children:m})=>{let n=o.useCallback(u=>{if(u){let x=()=>{let d=u.getBoundingClientRect().height;h(t,d)};x(),new MutationObserver(x).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[t,h]);return o.createElement("div",{ref:n,className:a,style:s},m)},aa=(t,a)=>{let s=t.includes("top"),h=s?{top:0}:{bottom:0},m=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${a*(s?1:-1)}px)`,...h,...m}},ra=Fe`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ce=16,ut=({reverseOrder:t,position:a="top-center",toastOptions:s,gutter:h,children:m,containerStyle:n,containerClassName:u})=>{let{toasts:x,handlers:d}=Ts(s);return o.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ce,left:Ce,right:Ce,bottom:Ce,pointerEvents:"none",...n},className:u,onMouseEnter:d.startPause,onMouseLeave:d.endPause},x.map(l=>{let g=l.position||a,j=d.calculateOffset(l,{reverseOrder:t,gutter:h,defaultPosition:a}),c=aa(g,j);return o.createElement(sa,{id:l.id,key:l.id,onHeightUpdate:d.updateHeight,className:l.visible?ra:"",style:c},l.type==="custom"?Ie(l.message,l):m?m(l):o.createElement(ta,{toast:l,position:g}))}))},pt=L;const _=t=>{pt.success(t,{style:{background:"#1e293b",color:"#fff",borderRadius:"0.5rem",border:"1px solid rgba(74, 222, 128, 0.2)"}})},C=t=>{pt.error(t,{style:{background:"#1e293b",color:"#fff",borderRadius:"0.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"}})},ia="https://luemwnpqvnynopvwtpqn.supabase.co",na="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1ZW13bnBxdm55bm9wdnd0cHFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY2MzEwOTksImV4cCI6MjA1MjIwNzA5OX0.g-uHQp7Qqw4jo5t5rZ-t7VHvyYlXmTdqIYRW2UerQf8",S=Et(ia,na,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0},global:{headers:{"X-Client-Info":"getgetleads-web"}}}),la=3,ca=1e3;function oa(t){const a=["AuthRetryableFetchError","FetchError","TimeoutError","NetworkError","AbortError"];return t instanceof Error&&(a.some(s=>t.message.includes(s))||t.message.includes("Failed to fetch")||t.message.includes("network")||t.message.includes("timeout")||t.message.includes("connection"))}async function O(t,a=la,s=ca){try{return await t()}catch(h){if(a>0&&oa(h))return await new Promise(m=>setTimeout(m,s)),O(t,a-1,s*2);throw h}}S.auth.onAuthStateChange((t,a)=>{t==="SIGNED_OUT"?(localStorage.removeItem("supabase.auth.token"),_("Successfully signed out")):t==="SIGNED_IN"?_("Successfully signed in"):t==="TOKEN_REFRESHED"?console.log("Auth token refreshed"):t==="USER_UPDATED"&&_("Profile updated successfully")});window.addEventListener("online",()=>{_("Back online")});window.addEventListener("offline",()=>{C("You are offline. Please check your internet connection.")});const gt=o.createContext(void 0);function da({children:t}){const[a,s]=o.useState(null),[h,m]=o.useState(null),[n,u]=o.useState(!0);o.useEffect(()=>{let g=!0;async function j(){try{const{data:{session:r}}=await S.auth.getSession();g&&(m(r),s((r==null?void 0:r.user)??null))}catch(r){console.error("Error checking auth session:",r)}finally{g&&u(!1)}}j();const{data:{subscription:c}}=S.auth.onAuthStateChange((r,i)=>{g&&(m(i),s((i==null?void 0:i.user)??null),u(!1))});return()=>{g=!1,c.unsubscribe()}},[]);const x=async(g,j)=>{try{const c=g.toLowerCase(),{error:r}=await S.auth.signInWithPassword({email:c,password:j});if(r)throw r;_("Successfully signed in")}catch(c){throw console.error("Sign in error:",c),C(c instanceof Error?c.message:"Failed to sign in"),c}},d=async(g,j)=>{try{const c=g.toLowerCase(),{data:r}=await S.from("users").select("id").eq("email",c).single();if(r)throw C("An account with this email already exists"),new Error("Account already exists");const{error:i}=await S.auth.signUp({email:c,password:j,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(i)throw i;_("Account created successfully")}catch(c){throw console.error("Sign up error:",c),C(c instanceof Error?c.message:"Failed to create account"),c}},l=async()=>{try{const{error:g}=await S.auth.signOut();if(g)throw g;_("Successfully signed out")}catch(g){throw console.error("Sign out error:",g),C(g instanceof Error?g.message:"Failed to sign out"),g}};return e.jsx(gt.Provider,{value:{user:a,session:h,loading:n,signIn:x,signUp:d,signOut:l},children:t})}class Y extends o.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,s){console.error("Uncaught error:",a,s)}render(){var a;return this.state.hasError?this.props.fallback||e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-primary-300 mb-4 max-w-md",children:((a=this.state.error)==null?void 0:a.message)||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Refresh Page"})]})}):this.props.children}}function T(){const t=o.useContext(gt);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return{...t,signIn:async(s,h)=>O(()=>t.signIn(s,h)),signUp:async(s,h)=>O(()=>t.signUp(s,h))}}function ma(){const[t,a]=o.useState(""),[s,h]=o.useState(""),[m,n]=o.useState(""),[u,x]=o.useState(!1),{signIn:d}=T(),l=we(),g=async j=>{j.preventDefault();try{n(""),x(!0),await d(t,s),l("/dashboard")}catch(c){n("Failed to sign in"),console.error(c)}finally{x(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-primary-800 px-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{className:"h-12 w-12 text-accent-500"})}),e.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"Sign in to your account"}),e.jsxs("p",{className:"mt-2 text-sm text-primary-300",children:["Or"," ",e.jsx(P,{to:"/signup",className:"font-medium text-accent-500 hover:text-accent-400",children:"create a new account"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[m&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4 text-sm",children:m}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-primary-200",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:j=>a(j.target.value),className:"mt-1 block w-full rounded-lg bg-primary-700 border-primary-600 text-white px-4 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-primary-200",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:j=>h(j.target.value),className:"mt-1 block w-full rounded-lg bg-primary-700 border-primary-600 text-white px-4 py-2"})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full btn-primary disabled:opacity-50",children:u?"Signing in...":"Sign in"})]})]})})}function xa(){const[t,a]=o.useState(""),[s,h]=o.useState(""),[m,n]=o.useState(""),[u,x]=o.useState(!1),{signUp:d}=T(),l=we(),g=async j=>{j.preventDefault();try{n(""),x(!0),await d(t,s),l("/dashboard")}catch(c){n("Failed to create an account"),console.error(c)}finally{x(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-primary-800 px-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{className:"h-12 w-12 text-accent-500"})}),e.jsx("h2",{className:"mt-6 text-3xl font-bold text-white",children:"Create your account"}),e.jsxs("p",{className:"mt-2 text-sm text-primary-300",children:["Or"," ",e.jsx(P,{to:"/login",className:"font-medium text-accent-500 hover:text-accent-400",children:"sign in to your account"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[m&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4 text-sm",children:m}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-primary-200",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:j=>a(j.target.value),className:"mt-1 block w-full rounded-lg bg-primary-700 border-primary-600 text-white px-4 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-primary-200",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:j=>h(j.target.value),className:"mt-1 block w-full rounded-lg bg-primary-700 border-primary-600 text-white px-4 py-2"})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full btn-primary disabled:opacity-50",children:u?"Creating account...":"Create account"})]})]})})}function ha(){return e.jsxs("div",{className:"min-h-screen bg-primary-800",children:[e.jsx("nav",{className:"bg-primary-900/50 border-b border-primary-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:"h-8 w-8 text-accent-500"}),e.jsx("span",{className:"ml-2 text-xl font-bold text-white",children:"GetGetLeads"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{to:"/login",className:"text-primary-300 hover:text-white transition-colors",children:"Sign In"}),e.jsx(P,{to:"/signup",className:"btn-primary py-2 px-4",children:"Get Started"})]})]})})}),e.jsx("div",{className:"relative overflow-hidden pt-16 pb-32",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"lg:mx-auto lg:grid lg:max-w-7xl lg:grid-flow-col-dense lg:grid-cols-2 lg:gap-24 lg:px-8",children:e.jsx("div",{className:"mx-auto max-w-xl px-6 lg:mx-0 lg:max-w-none lg:py-16 lg:px-0",children:e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white sm:text-6xl",children:"AI-Powered Marketing Made Simple"}),e.jsx("p",{className:"mt-6 text-lg leading-8 text-primary-300",children:"Create engaging content, automate your marketing tasks, and drive better results with our intuitive AI marketing platform."}),e.jsxs("div",{className:"mt-10 flex items-center gap-x-6",children:[e.jsx(P,{to:"/signup",className:"btn-primary py-3 px-8",children:"Start Free Trial"}),e.jsxs(P,{to:"#features",className:"text-sm font-semibold leading-6 text-white flex items-center gap-2",children:["Watch Demo ",e.jsx(et,{className:"w-4 h-4"})]})]})]})})})})})}),e.jsx("div",{id:"features",className:"py-24 sm:py-32",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-6 lg:px-8",children:[e.jsxs("div",{className:"mx-auto max-w-2xl lg:text-center",children:[e.jsx("h2",{className:"text-base font-semibold leading-7 text-accent-500",children:"Features Overview"}),e.jsx("p",{className:"mt-2 text-3xl font-bold tracking-tight text-white sm:text-4xl",children:"Everything you need to supercharge your marketing"})]}),e.jsx("div",{className:"mx-auto mt-16 max-w-2xl sm:mt-20 lg:mt-24 lg:max-w-none",children:e.jsxs("dl",{className:"grid max-w-xl grid-cols-1 gap-x-8 gap-y-16 lg:max-w-none lg:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("dt",{className:"flex items-center gap-x-3 text-lg font-semibold leading-7 text-white",children:[e.jsx(Oe,{className:"h-5 w-5 flex-none text-accent-500"}),"All-in-One Dashboard"]}),e.jsx("dd",{className:"mt-4 flex flex-auto flex-col text-base leading-7 text-primary-300",children:e.jsx("p",{className:"flex-auto",children:"Manage all your marketing activities from a single, intuitive dashboard."})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("dt",{className:"flex items-center gap-x-3 text-lg font-semibold leading-7 text-white",children:[e.jsx(ve,{className:"h-5 w-5 flex-none text-accent-500"}),"Content Management"]}),e.jsx("dd",{className:"mt-4 flex flex-auto flex-col text-base leading-7 text-primary-300",children:e.jsx("p",{className:"flex-auto",children:"Create, schedule, and manage your content across all platforms."})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("dt",{className:"flex items-center gap-x-3 text-lg font-semibold leading-7 text-white",children:[e.jsx(V,{className:"h-5 w-5 flex-none text-accent-500"}),"Customer Management"]}),e.jsx("dd",{className:"mt-4 flex flex-auto flex-col text-base leading-7 text-primary-300",children:e.jsx("p",{className:"flex-auto",children:"Track and manage your leads, customers, and interactions."})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("dt",{className:"flex items-center gap-x-3 text-lg font-semibold leading-7 text-white",children:[e.jsx(le,{className:"h-5 w-5 flex-none text-accent-500"}),"Social Media Tools"]}),e.jsx("dd",{className:"mt-4 flex flex-auto flex-col text-base leading-7 text-primary-300",children:e.jsx("p",{className:"flex-auto",children:"Schedule posts, analyze performance, and grow your social presence."})})]})]})})]})}),e.jsx("div",{className:"relative isolate mt-32 px-6 py-32 sm:mt-56 sm:py-40 lg:px-8",children:e.jsxs("div",{className:"mx-auto max-w-2xl text-center",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl",children:"Ready to transform your marketing?"}),e.jsx("p",{className:"mx-auto mt-6 max-w-xl text-lg leading-8 text-primary-300",children:"Join thousands of marketers who are already using GetGetLeads to streamline their marketing efforts."}),e.jsxs("div",{className:"mt-10 flex items-center justify-center gap-x-6",children:[e.jsx(P,{to:"/signup",className:"btn-primary py-3 px-8",children:"Get Started"}),e.jsxs(P,{to:"/pricing",className:"text-sm font-semibold leading-6 text-white",children:["View pricing ",e.jsx("span",{"aria-hidden":"true",children:"→"})]})]})]})}),e.jsx("footer",{className:"bg-primary-900/50 border-t border-primary-700",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-12 md:flex md:items-center md:justify-between lg:px-8",children:[e.jsxs("div",{className:"flex justify-center space-x-6 md:order-2",children:[e.jsx(P,{to:"#",className:"text-primary-300 hover:text-white",children:"Terms"}),e.jsx(P,{to:"#",className:"text-primary-300 hover:text-white",children:"Privacy"}),e.jsx(P,{to:"#",className:"text-primary-300 hover:text-white",children:"Contact"})]}),e.jsx("div",{className:"mt-8 md:order-1 md:mt-0",children:e.jsx("p",{className:"text-center text-xs leading-5 text-primary-300",children:"© 2024 GetGetLeads. All rights reserved."})})]})})]})}function ft(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState(!0),[n,u]=o.useState(null);o.useEffect(()=>{t&&x()},[t]);const x=async()=>{try{m(!0),u(null);const{data:j,error:c}=await S.from("customers").select("*").eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1});if(c)throw c;s(j||[])}catch(j){console.error("Error loading customers:",j),u("Failed to load customers"),C("Failed to load customers")}finally{m(!1)}};return{customers:a,loading:h,error:n,addCustomer:async(j,c,r="manual")=>{try{const{data:i,error:f}=await S.from("customers").insert({email:j,name:c,source:r,user_id:t==null?void 0:t.id,status:"lead"}).select().single();if(f)throw f;return s(p=>[i,...p]),_("Customer added successfully"),i}catch(i){throw console.error("Error adding customer:",i),C("Failed to add customer"),i}},updateCustomer:async(j,c)=>{try{const{data:r,error:i}=await S.from("customers").update(c).eq("id",j).eq("user_id",t==null?void 0:t.id).select().single();if(i)throw i;return s(f=>f.map(p=>p.id===j?r:p)),_("Customer updated successfully"),r}catch(r){throw console.error("Error updating customer:",r),C("Failed to update customer"),r}},deleteCustomer:async j=>{try{const{error:c}=await S.from("customers").delete().eq("id",j).eq("user_id",t==null?void 0:t.id);if(c)throw c;s(r=>r.filter(i=>i.id!==j)),_("Customer deleted successfully")}catch(c){throw console.error("Error deleting customer:",c),C("Failed to delete customer"),c}},refresh:x}}function me(){T();const[t,a]=o.useState(!1),[s,h]=o.useState(null);return{generateContent:async(x,d,l={})=>{try{return a(!0),h(null),{content:`Generated ${d} content for: ${x}`,suggestions:[]}}catch(g){const j=g instanceof Error?g.message:"Failed to generate content";throw h(j),C(j),g}finally{a(!1)}},analyzeCustomerData:async x=>{try{a(!0),h(null);const d={behavior:"Customer shows high engagement with email campaigns and regularly uses core features.",recommendations:["Consider offering premium feature upgrade","Engage through personalized email campaign","Schedule quarterly review call"],engagementTrend:Array.from({length:6},(l,g)=>({date:new Date(Date.now()-g*30*24*60*60*1e3).toISOString().split("T")[0],engagement:Math.floor(Math.random()*100)})).reverse(),churnRisk:"Low",lifetimeValue:"$1,234",nextBestAction:"Schedule follow-up call"};return _("Analysis completed successfully"),d}catch(d){const l=d instanceof Error?d.message:"Failed to analyze customer data";throw h(l),C(l),d}finally{a(!1)}},optimizeBudget:async x=>{try{return a(!0),h(null),{recommendations:["Increase social media advertising budget by 20%","Reduce underperforming campaign spending","Invest in content marketing"],allocation:{social:.4,email:.3,content:.2,other:.1},projectedROI:2.5}}catch(d){const l=d instanceof Error?d.message:"Failed to optimize budget";throw h(l),C(l),d}finally{a(!1)}},loading:t,error:s}}function $e({feature:t,className:a=""}){return e.jsxs("div",{className:`flex items-center gap-2 text-accent-500 ${a}`,children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["AI-Powered ",t]})]})}function ge(){const t=we();return St().pathname==="/dashboard"?null:e.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center gap-2 text-primary-300 hover:text-white transition-colors","aria-label":"Back to Dashboard",children:[e.jsx(_t,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Dashboard"})]})}function Ve({size:t=24,className:a="",message:s="Loading..."}){return e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx(At,{className:`animate-spin text-accent-500 ${a}`,size:t}),s&&e.jsx("p",{className:"text-primary-300 text-sm",children:s})]})}function jt({title:t,message:a,icon:s,action:h}){return e.jsx("div",{className:"min-h-[300px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[s||e.jsx(Dt,{className:"w-12 h-12 text-primary-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:t}),e.jsx("p",{className:"text-primary-300 mb-4",children:a}),h]})})}function ua({customerId:t,onClose:a}){var j,c,r,i,f,p,y,N,w;const{customers:s,updateCustomer:h}=ft(),{analyzeCustomerData:m}=me();o.useState(!1);const[n,u]=o.useState(!1),[x,d]=o.useState(null),l=s.find(b=>b.id===t);if(!l)return null;const g=async()=>{u(!0);try{const b=await m(t);d(b)}catch(b){console.error("Analysis error:",b)}finally{u(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-primary-700 rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-primary-700 border-b border-primary-600 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Customer Profile"}),e.jsx("button",{onClick:a,className:"text-primary-300 hover:text-white",children:e.jsx(X,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(It,{className:"w-5 h-5 text-accent-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200",children:"Name"}),e.jsx("p",{className:"text-white",children:l.name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"w-5 h-5 text-accent-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200",children:"Email"}),e.jsx("p",{className:"text-white",children:l.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rt,{className:"w-5 h-5 text-accent-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200",children:"Phone"}),e.jsx("p",{className:"text-white",children:((j=l.metadata)==null?void 0:j.phone)||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tt,{className:"w-5 h-5 text-accent-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200",children:"Address"}),e.jsx("p",{className:"text-white",children:((c=l.metadata)==null?void 0:c.address)||"-"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-accent-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200",children:"Customer Since"}),e.jsx("p",{className:"text-white",children:new Date(l.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tt,{className:"w-5 h-5 text-accent-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:(i=(r=l.metadata)==null?void 0:r.tags)==null?void 0:i.map((b,k)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-primary-600/50 rounded-full text-primary-300",children:b},k))})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"w-5 h-5 text-accent-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200",children:"Status"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l.status==="lead"?"bg-blue-500/20 text-blue-400":l.status==="qualified"?"bg-green-500/20 text-green-400":l.status==="customer"?"bg-purple-500/20 text-purple-400":"bg-primary-500/20 text-primary-300"}`,children:l.status})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Lifetime Value"}),e.jsx(te,{className:"w-4 h-4 text-accent-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",(((f=l.metadata)==null?void 0:f.lifetimeValue)||0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Engagement Score"}),e.jsx(M,{className:"w-4 h-4 text-accent-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[((p=l.metadata)==null?void 0:p.engagementScore)||0,"/10"]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Churn Risk"}),e.jsx(qe,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:((y=l.metadata)==null?void 0:y.churnRisk)||"Low"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500"}),e.jsx("h4",{className:"text-lg font-medium text-white",children:"AI Analysis"})]}),e.jsxs("button",{onClick:g,disabled:n,className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),n?"Analyzing...":"Analyze"]})]}),x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-primary-200 mb-2",children:"Behavior Analysis"}),e.jsx("p",{className:"text-white",children:x.behavior})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-primary-200 mb-2",children:"Recommendations"}),e.jsx("ul",{className:"space-y-2",children:x.recommendations.map((b,k)=>e.jsxs("li",{className:"flex items-start gap-2 text-white",children:[e.jsx(A,{className:"w-4 h-4 text-accent-500 mt-1"}),b]},k))})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-primary-200 mb-2",children:"Engagement Trend"}),e.jsx("div",{className:"h-48",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(se,{data:x.engagementTrend,children:[e.jsx(K,{dataKey:"date",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8"}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(Z,{type:"monotone",dataKey:"engagement",stroke:"#f97316",strokeWidth:2})]})})})]})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-accent-500"}),e.jsx("h4",{className:"text-lg font-medium text-white",children:"Interaction History"})]}),e.jsxs("button",{className:"btn-secondary py-2 px-4 flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Add Note"]})]}),e.jsx("div",{className:"space-y-4",children:(w=(N=l.metadata)==null?void 0:N.interactions)==null?void 0:w.map((b,k)=>e.jsx("div",{className:"bg-primary-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:b.note}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:new Date(b.date).toLocaleString()})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.type==="email"?"bg-blue-500/20 text-blue-400":b.type==="call"?"bg-green-500/20 text-green-400":"bg-primary-500/20 text-primary-300"}`,children:b.type})]})},k))})]})]})]})})}const Ye=["#f97316","#3b82f6","#10b981","#8b5cf6"];function pa({customers:t}){const{analyzeCustomerData:a}=me(),[s,h]=o.useState(!1),[m,n]=o.useState(null),u=async()=>{h(!0);try{const r=await a("all");n(r)}catch(r){console.error("Analysis error:",r)}finally{h(!1)}},x=t.length,d=t.filter(r=>r.status==="active").length,l=t.reduce((r,i)=>{var f;return r+(((f=i.metadata)==null?void 0:f.lifetimeValue)||0)},0),g=x>0?l/x:0,j=t.reduce((r,i)=>{const f=new Date(i.created_at).toLocaleString("default",{month:"short"});return r[f]=(r[f]||0)+1,r},{}),c=[{name:"New",value:t.filter(r=>r.status==="lead").length},{name:"Active",value:t.filter(r=>r.status==="active").length},{name:"Inactive",value:t.filter(r=>r.status==="inactive").length},{name:"Churned",value:t.filter(r=>r.status==="churned").length}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Total Customers"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:x}),e.jsx("span",{className:"text-sm text-green-400",children:"+12% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Te,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Active Customers"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:d}),e.jsx("span",{className:"text-sm text-green-400",children:"+5% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(te,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Avg. Lifetime Value"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",g.toFixed(2)]}),e.jsx("span",{className:"text-sm text-green-400",children:"+8% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(qe,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Churn Rate"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"2.4%"}),e.jsx("span",{className:"text-sm text-red-400",children:"+0.5% from last month"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Customer Acquisition"}),e.jsx(Ke,{className:"w-5 h-5 text-accent-500"})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(se,{data:Object.entries(j).map(([r,i])=>({month:r,customers:i})),children:[e.jsx(K,{dataKey:"month",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8"}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(Z,{type:"monotone",dataKey:"customers",stroke:"#f97316",strokeWidth:2,dot:{fill:"#f97316"}})]})})})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Customer Segments"}),e.jsx(V,{className:"w-5 h-5 text-accent-500"})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(xe,{children:[e.jsx(he,{data:c,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:r,value:i})=>`${r}: ${i}`,children:c.map((r,i)=>e.jsx(oe,{fill:Ye[i%Ye.length]},r.name))}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}})]})})})]})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"AI Insights"})]}),e.jsxs("button",{onClick:u,disabled:s,className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),s?"Analyzing...":"Generate Insights"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200 mb-4",children:"Growth Trends"}),e.jsx("div",{className:"space-y-4",children:m.trends.map((r,i)=>e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-accent-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:r.insight}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:r.details})]})]},i))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200 mb-4",children:"Recommendations"}),e.jsx("div",{className:"space-y-4",children:m.recommendations.map((r,i)=>e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:r.action}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:r.impact})]})]},i))})]})]})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Customer Behavior"}),e.jsx(st,{className:"w-5 h-5 text-accent-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200 mb-2",children:"Avg. Engagement Score"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"7.8"}),e.jsx("div",{className:"text-sm text-green-400",children:"+0.5"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200 mb-2",children:"Purchase Frequency"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"12"}),e.jsx("div",{className:"text-sm text-primary-300",children:"days"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200 mb-2",children:"Retention Rate"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"85%"}),e.jsx("div",{className:"text-sm text-green-400",children:"+2%"})]})]})]})]})]})}const Xe=["#f97316","#3b82f6","#10b981","#8b5cf6"];function ga({customers:t,onSegmentSelect:a}){const[s,h]=o.useState(null),[m,n]=o.useState(!1),u=[{id:"high-value",name:"High Value",count:t.filter(d=>{var l;return(((l=d.metadata)==null?void 0:l.lifetimeValue)||0)>1e3}).length,criteria:"LTV > $1,000"},{id:"at-risk",name:"At Risk",count:t.filter(d=>{var l;return((l=d.metadata)==null?void 0:l.churnRisk)==="High"}).length,criteria:"High churn risk"},{id:"new",name:"New Customers",count:t.filter(d=>{const l=new Date(d.created_at),j=Math.abs(new Date().getTime()-l.getTime());return Math.ceil(j/(1e3*60*60*24))<=30}).length,criteria:"Joined in last 30 days"}],x=d=>{h(d),a(d)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Customer Distribution"}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Create Segment"]})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(xe,{children:[e.jsx(he,{data:u,dataKey:"count",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:u.map((d,l)=>e.jsx(oe,{fill:Xe[l%Xe.length]},d.id))}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}})]})})})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Segment Metrics"}),e.jsx("div",{className:"space-y-4",children:u.map(d=>e.jsx("div",{className:`bg-primary-600/50 rounded-lg p-4 cursor-pointer transition-colors ${s===d.id?"ring-2 ring-accent-500":""}`,onClick:()=>x(d.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:d.name}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:d.criteria})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:d.count}),e.jsx("p",{className:"text-sm text-primary-300",children:"customers"})]})]})},d.id))})]})]}),s&&e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Segment Details"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{className:"btn-secondary py-2 px-4 flex items-center gap-2",children:[e.jsx(at,{className:"w-4 h-4"}),"Edit Criteria"]}),e.jsxs("button",{className:"btn-secondary py-2 px-4 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"AI Insights"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Avg. LTV"}),e.jsx(te,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"$1,234"})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Engagement"}),e.jsx(M,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"8.4/10"})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Growth Rate"}),e.jsx(M,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"+12%"})]})]}),e.jsx("div",{className:"bg-primary-600/50 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary-500/20",children:[e.jsx("th",{className:"text-left p-4 text-primary-200",children:"Customer"}),e.jsx("th",{className:"text-left p-4 text-primary-200",children:"Status"}),e.jsx("th",{className:"text-left p-4 text-primary-200",children:"LTV"}),e.jsx("th",{className:"text-left p-4 text-primary-200",children:"Last Activity"})]})}),e.jsx("tbody",{className:"divide-y divide-primary-500/20",children:t.filter(d=>{var l,g;switch(s){case"high-value":return(((l=d.metadata)==null?void 0:l.lifetimeValue)||0)>1e3;case"at-risk":return((g=d.metadata)==null?void 0:g.churnRisk)==="High";case"new":const j=new Date(d.created_at),r=Math.abs(new Date().getTime()-j.getTime());return Math.ceil(r/(1e3*60*60*24))<=30;default:return!0}}).map(d=>{var l,g;return e.jsxs("tr",{className:"hover:bg-primary-500/10",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:d.name}),e.jsx("div",{className:"text-sm text-primary-300",children:d.email})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d.status==="lead"?"bg-blue-500/20 text-blue-400":d.status==="qualified"?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-400"}`,children:d.status})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"text-white",children:["$",(((l=d.metadata)==null?void 0:l.lifetimeValue)||0).toLocaleString()]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-primary-300",children:new Date(((g=d.metadata)==null?void 0:g.lastActivity)||d.created_at).toLocaleDateString()})})]},d.id)})})]})})]})]})}function fa({customers:t}){o.useState(null);const[a,s]=o.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"Automation Workflows"})]}),e.jsxs("button",{onClick:()=>s(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Create Workflow"]})]}),e.jsx("div",{className:"text-white",children:"Workflow implementation coming soon..."})]})}function ja({customers:t}){const[a,s]=o.useState("30d"),[h,m]=o.useState("all"),[n,u]=o.useState(!1),x=[{id:"1",customer:"John Doe",rating:5,message:"Excellent product and great customer service!",category:"product",sentiment:"positive",date:"2024-01-10"},{id:"2",customer:"Jane Smith",rating:3,message:"Product is good but could use some improvements.",category:"product",sentiment:"neutral",date:"2024-01-09"},{id:"3",customer:"Bob Wilson",rating:4,message:"Support team was very helpful.",category:"support",sentiment:"positive",date:"2024-01-08"}],d=x.reduce((j,c)=>j+c.rating,0)/x.length,l=x.filter(j=>j.sentiment==="positive").length;return x.filter(j=>j.sentiment==="negative").length,e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ce,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Average Rating"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[d.toFixed(1),"/5"]}),e.jsx("span",{className:"text-sm text-green-400",children:"+0.2 from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Pt,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Positive Feedback"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l}),e.jsx("span",{className:"text-sm text-green-400",children:"+5 from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(be,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Response Rate"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[85,"%"]}),e.jsx("span",{className:"text-sm text-green-400",children:"+2% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Sentiment Score"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"8.4/10"}),e.jsx("span",{className:"text-sm text-green-400",children:"+0.3 from last month"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:a,onChange:j=>s(j.target.value),className:"bg-primary-600/50 border-primary-500 rounded-lg text-white px-4 py-2",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsxs("select",{value:h,onChange:j=>m(j.target.value),className:"bg-primary-600/50 border-primary-500 rounded-lg text-white px-4 py-2",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"product",children:"Product"}),e.jsx("option",{value:"support",children:"Support"}),e.jsx("option",{value:"billing",children:"Billing"})]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Analyze Feedback"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Rating Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(se,{data:[{date:"2024-01-01",rating:4.2},{date:"2024-01-02",rating:4.5},{date:"2024-01-03",rating:4.3},{date:"2024-01-04",rating:4.7},{date:"2024-01-05",rating:4.4}],children:[e.jsx(K,{dataKey:"date",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8",domain:[0,5]}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(Z,{type:"monotone",dataKey:"rating",stroke:"#f97316",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Feedback by Category"}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(Be,{data:[{category:"Product",count:45},{category:"Support",count:32},{category:"Billing",count:18},{category:"Other",count:12}],children:[e.jsx(K,{dataKey:"category",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8"}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(De,{dataKey:"count",fill:"#f97316",radius:[4,4,0,0]})]})})})]})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Recent Feedback"}),e.jsx("div",{className:"space-y-4",children:x.map(j=>e.jsx("div",{className:"bg-primary-600/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"text-white font-medium",children:j.customer}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:j.rating}).map((c,r)=>e.jsx(ce,{className:"w-4 h-4 text-accent-500 fill-current"},r))})]}),e.jsx("p",{className:"text-primary-200",children:j.message})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.sentiment==="positive"?"bg-green-500/20 text-green-400":j.sentiment==="negative"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:j.sentiment}),e.jsx("span",{className:"text-sm text-primary-400",children:new Date(j.date).toLocaleDateString()})]})]})},j.id))})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-primary-700 rounded-xl p-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"Feedback Analysis"})]}),e.jsx("button",{onClick:()=>u(!1),className:"text-primary-300 hover:text-white",children:e.jsx(F,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200 mb-4",children:"Key Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Product features are highly rated"}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:"85% of customers mention positive experiences with core features"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Support response time needs improvement"}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:"20% increase in support-related feedback"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200 mb-4",children:"Recommendations"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Improve support response time"}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:"Consider adding more support staff during peak hours"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Enhance product documentation"}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:"Create more video tutorials for common user questions"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>u(!1),className:"btn-primary py-2 px-6",children:"Close"})})]})]})})]})}function ya({onClose:t,onImport:a}){const[s,h]=o.useState(null),[m,n]=o.useState([]),[u,x]=o.useState(null),[d,l]=o.useState(!1),g=o.useRef(null),j=i=>{var p;const f=(p=i.target.files)==null?void 0:p[0];if(f){if(!f.name.endsWith(".csv")){x("Please select a CSV file");return}h(f),c(f)}},c=i=>{const f=new FileReader;f.onload=p=>{var y;try{const w=((y=p.target)==null?void 0:y.result).split(`
`),b=w[0].split(",").map(E=>E.trim()),k=w.slice(1,6).map(E=>{const D=E.split(",");return b.reduce(($,W,z)=>{var G;return $[W]=((G=D[z])==null?void 0:G.trim())||"",$},{})});n(k),x(null)}catch(N){x("Failed to parse CSV file"),console.error("CSV parse error:",N)}},f.readAsText(i)},r=async()=>{if(s){l(!0);try{const i=new FileReader;i.onload=async f=>{var b;const y=((b=f.target)==null?void 0:b.result).split(`
`),N=y[0].split(",").map(k=>k.trim()),w=y.slice(1).map(k=>{const E=k.split(",");return N.reduce((D,$,W)=>{var z;return D[$]=((z=E[W])==null?void 0:z.trim())||"",D},{})});await a(w),t()},i.readAsText(s)}catch(i){x("Failed to import customers"),console.error("Import error:",i)}finally{l(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-primary-700 rounded-xl p-6 w-full max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Import Customers"}),e.jsx("button",{onClick:t,className:"text-primary-300 hover:text-white",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"border-2 border-dashed border-primary-500 rounded-lg p-8 text-center cursor-pointer hover:border-accent-500 transition-colors",onClick:()=>{var i;return(i=g.current)==null?void 0:i.click()},children:[e.jsx("input",{type:"file",ref:g,onChange:j,accept:".csv",className:"hidden"}),e.jsx(rt,{className:"w-8 h-8 text-primary-400 mx-auto mb-4"}),e.jsx("p",{className:"text-primary-200 mb-2",children:s?s.name:"Drop your CSV file here or click to browse"}),e.jsx("p",{className:"text-sm text-primary-400",children:"Supported format: CSV"})]})}),u&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4 mb-6 flex items-start gap-2",children:[e.jsx(F,{className:"w-5 h-5 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Import Error"}),e.jsx("p",{className:"text-sm mt-1",children:u})]})]}),m.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-primary-200 mb-4",children:"Preview (first 5 rows)"}),e.jsx("div",{className:"bg-primary-600/50 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-primary-500/20",children:Object.keys(m[0]).map(i=>e.jsx("th",{className:"text-left p-4 text-primary-200 text-sm font-medium",children:i},i))})}),e.jsx("tbody",{className:"divide-y divide-primary-500/20",children:m.map((i,f)=>e.jsx("tr",{children:Object.values(i).map((p,y)=>e.jsx("td",{className:"p-4 text-white",children:p},y))},f))})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{className:"flex items-center gap-2 text-accent-500 hover:text-accent-400",children:[e.jsx(ve,{className:"w-4 h-4"}),"Download CSV Template"]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-primary-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:r,disabled:!s||d,className:"btn-primary py-2 px-6 flex items-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-400 border-t-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"w-4 h-4"}),"Import Customers"]})})]})]})})}const ba=["#f97316","#3b82f6","#10b981","#8b5cf6"];function Na({customers:t}){const[a,s]=o.useState(null),[h,m]=o.useState(!1),n=[{id:"bronze",name:"Bronze",icon:Lt,members:234,requirements:"Spend $500 or 3 months active",benefits:["5% discount","Priority support","Monthly newsletter"]},{id:"silver",name:"Silver",icon:ce,members:156,requirements:"Spend $1,000 or 6 months active",benefits:["10% discount","24/7 support","Exclusive events"]},{id:"gold",name:"Gold",icon:Ot,members:89,requirements:"Spend $2,500 or 12 months active",benefits:["15% discount","Dedicated account manager","Early access"]}],u=[{id:"1",name:"Free Month Subscription",points:1e3,claimed:45,available:100},{id:"2",name:"Premium Feature Access",points:500,claimed:78,available:150},{id:"3",name:"Custom Integration",points:2e3,claimed:12,available:50}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Active Members"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"479"}),e.jsx("span",{className:"text-sm text-green-400",children:"+24 this month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ce,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Avg. Points"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"856"}),e.jsx("span",{className:"text-sm text-green-400",children:"+12% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ft,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Rewards Claimed"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"135"}),e.jsx("span",{className:"text-sm text-green-400",children:"+8 this week"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Retention Rate"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"92%"}),e.jsx("span",{className:"text-sm text-green-400",children:"+2% from last month"})]})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"Loyalty Tiers"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Create Program"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-6",children:n.map(x=>e.jsxs("div",{className:`bg-primary-600/50 rounded-lg p-6 cursor-pointer transition-colors ${a===x.id?"ring-2 ring-accent-500":""}`,onClick:()=>s(x.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x.icon,{className:"w-5 h-5 text-accent-500"}),e.jsx("h4",{className:"text-lg font-medium text-white",children:x.name})]}),e.jsxs("span",{className:"text-primary-300",children:[x.members," members"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-primary-200 mb-2",children:"Requirements"}),e.jsx("p",{className:"text-primary-300",children:x.requirements})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-primary-200 mb-2",children:"Benefits"}),e.jsx("ul",{className:"space-y-1",children:x.benefits.map((d,l)=>e.jsxs("li",{className:"text-primary-300 flex items-center gap-2",children:[e.jsx(ce,{className:"w-3 h-3 text-accent-500"}),d]},l))})]})]})]},x.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Available Rewards"}),e.jsx("div",{className:"space-y-4",children:u.map(x=>e.jsx("div",{className:"bg-primary-600/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:x.name}),e.jsxs("p",{className:"text-sm text-primary-300 mt-1",children:[x.points," points required"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-primary-300",children:[x.available-x.claimed," remaining"]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-32 h-2 bg-primary-500 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-500",style:{width:`${x.claimed/x.available*100}%`}})})})]})]})},x.id))})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Points Distribution"}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(xe,{children:[e.jsx(he,{data:[{name:"Bronze",value:234},{name:"Silver",value:156},{name:"Gold",value:89}],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:x,value:d})=>`${x}: ${d}`,children:ba.map((x,d)=>e.jsx(oe,{fill:x},`cell-${d}`))}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}})]})})})]})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Points History"}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(se,{data:[{date:"Jan",points:1200},{date:"Feb",points:1400},{date:"Mar",points:1100},{date:"Apr",points:1600},{date:"May",points:1800},{date:"Jun",points:2e3}],children:[e.jsx(K,{dataKey:"date",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8"}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(Z,{type:"monotone",dataKey:"points",stroke:"#f97316",strokeWidth:2,dot:{fill:"#f97316"}})]})})})]})]})}function yt(){const{customers:t,loading:a,error:s,addCustomer:h,updateCustomer:m,deleteCustomer:n}=ft();me();const[u,x]=o.useState(!1),[d,l]=o.useState(!1),[g,j]=o.useState(null),[c,r]=o.useState("list");if(a)return e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsx(Ve,{size:32})});if(s)return e.jsx(jt,{title:"Error Loading Customers",message:s,icon:e.jsx(F,{className:"w-12 h-12 text-red-500 mx-auto mb-4"})});const i=()=>{switch(c){case"analytics":return e.jsx(pa,{customers:t});case"segments":return e.jsx(ga,{customers:t,onSegmentSelect:()=>{}});case"workflows":return e.jsx(fa,{customers:t});case"feedback":return e.jsx(ja,{customers:t});case"loyalty":return e.jsx(Na,{customers:t});default:return e.jsx("div",{className:"space-y-4",children:t.map(f=>e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-4 flex items-center justify-between",onClick:()=>j(f.id),children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:f.name}),e.jsx("p",{className:"text-primary-300",children:f.email})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f.status==="lead"?"bg-blue-500/20 text-blue-400":f.status==="customer"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:f.status}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:p=>{p.stopPropagation(),m(f.id,{status:"customer"})},className:"p-2 text-primary-300 hover:text-white transition-colors",children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:p=>{p.stopPropagation(),n(f.id)},className:"p-2 text-primary-300 hover:text-red-400 transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]})]},f.id))})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ge,{}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Customer Management"}),e.jsx($e,{feature:"Customer Analysis"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>l(!0),className:"btn-secondary py-2 px-4 flex items-center gap-2",children:[e.jsx(rt,{className:"w-4 h-4"}),"Import"]}),e.jsxs("button",{onClick:()=>x(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Add Customer"]})]})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-primary-700",children:[e.jsx("button",{onClick:()=>r("list"),className:`px-4 py-2 ${c==="list"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Customers"]})}),e.jsx("button",{onClick:()=>r("analytics"),className:`px-4 py-2 ${c==="analytics"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Analytics"]})}),e.jsx("button",{onClick:()=>r("segments"),className:`px-4 py-2 ${c==="segments"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(at,{className:"w-4 h-4"}),"Segments"]})}),e.jsx("button",{onClick:()=>r("workflows"),className:`px-4 py-2 ${c==="workflows"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Workflows"]})}),e.jsx("button",{onClick:()=>r("feedback"),className:`px-4 py-2 ${c==="feedback"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Feedback"]})}),e.jsx("button",{onClick:()=>r("loyalty"),className:`px-4 py-2 ${c==="loyalty"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Loyalty"]})})]}),i(),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-primary-700 rounded-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Add Customer"}),e.jsx("button",{onClick:()=>x(!1),className:"text-primary-300 hover:text-white",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsx("form",{onSubmit:async f=>{f.preventDefault();const p=new FormData(f.currentTarget);await h(p.get("email"),p.get("name"),p.get("source")),x(!1)},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",required:!0,className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",required:!0,className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-1",children:"Source"}),e.jsxs("select",{name:"source",className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",children:[e.jsx("option",{value:"website",children:"Website"}),e.jsx("option",{value:"referral",children:"Referral"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-primary-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary py-2 px-6",children:"Add Customer"})]})]})})]})}),d&&e.jsx(ya,{onClose:()=>l(!1),onImport:async f=>{console.log("Importing customers:",f),l(!1)}}),g&&e.jsx(ua,{customerId:g,onClose:()=>j(null)})]})}function wa(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState(!0),[n,u]=o.useState(null);o.useEffect(()=>{t&&x()},[t]);const x=async()=>{try{const{data:g,error:j}=await S.from("content_library").select("*").order("created_at",{ascending:!1});if(j)throw j;s(g||[])}catch(g){console.error("Error loading content:",g),u(g instanceof Error?g:new Error("Failed to load content"))}finally{m(!1)}};return{items:a,loading:h,error:n,createContent:async(g,j,c,r=[],i={})=>{try{const{data:f,error:p}=await S.from("content_library").insert({title:g,content:j,content_type:c,tags:r,metadata:i,user_id:t==null?void 0:t.id}).select().single();if(p)throw p;return s(y=>[f,...y]),f}catch(f){throw console.error("Error creating content:",f),f}},updateContent:async(g,j)=>{try{const{data:c,error:r}=await S.from("content_library").update(j).eq("id",g).select().single();if(r)throw r;return s(i=>i.map(f=>f.id===g?c:f)),c}catch(c){throw console.error("Error updating content:",c),c}},refresh:x}}function va(){const{items:t,loading:a,createContent:s,updateContent:h}=wa(),[m,n]=o.useState(!1),[u,x]=o.useState(""),[d,l]=o.useState(""),[g,j]=o.useState("article"),[c,r]=o.useState(""),[i,f]=o.useState(null),p=async y=>{y.preventDefault();try{f(null),await s(u,d,g,c.split(",").map(N=>N.trim()).filter(Boolean)),n(!1),x(""),l(""),j("article"),r("")}catch(N){f("Failed to create content. Please try again."),console.error(N)}};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-accent-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Content Library"}),e.jsxs("button",{onClick:()=>n(!m),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Create Content"]})]}),i&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4 text-sm",children:i}),m&&e.jsxs("form",{onSubmit:p,className:"bg-primary-700/50 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-primary-200",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:u,onChange:y=>x(y.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-primary-200",children:"Content"}),e.jsx("textarea",{id:"content",value:d,onChange:y=>l(y.target.value),rows:4,className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contentType",className:"block text-sm font-medium text-primary-200",children:"Content Type"}),e.jsxs("select",{id:"contentType",value:g,onChange:y=>j(y.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",children:[e.jsx("option",{value:"article",children:"Article"}),e.jsx("option",{value:"social",children:"Social Post"}),e.jsx("option",{value:"email",children:"Email Template"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-primary-200",children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",id:"tags",value:c,onChange:y=>r(y.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",placeholder:"marketing, blog, social"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-primary-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary py-2 px-6",children:"Create"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(y=>e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:y.title})]}),e.jsx("button",{className:"p-1.5 rounded-lg hover:bg-primary-600 transition-colors text-primary-300 hover:text-white",children:e.jsx(Ue,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-primary-300 line-clamp-3",children:y.content}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-primary-400",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(y.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1 text-primary-400",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:y.content_type})]})]}),y.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:y.tags.map((N,w)=>e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-primary-600/50 text-primary-300",children:N},w))})]},y.id))})]})}function Sa(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState({totalEngagement:0,totalImpressions:0,engagementRate:0,platformBreakdown:{},timePerformance:[],recentTrends:[]}),[n,u]=o.useState(!0),[x,d]=o.useState(null);o.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{u(!0),d(null);const{data:r,error:i}=await S.from("social_analytics").select("*, social_media_posts (platform, created_at)").order("recorded_at",{ascending:!1});if(i)throw i;s(r||[]),g(r||[])}catch(r){console.error("Error loading social analytics:",r),d("Failed to load analytics data")}finally{u(!1)}},g=r=>{const i={};let f=0,p=0;r.forEach(w=>{const b=w.platform;i[b]||(i[b]={posts:0,engagement:0,impressions:0}),i[b].posts++,i[b].engagement+=w.engagement,i[b].impressions+=w.impressions,f+=w.engagement,p+=w.impressions});const y=j(r),N=c(r);m({totalEngagement:f,totalImpressions:p,engagementRate:p>0?f/p*100:0,platformBreakdown:i,timePerformance:y,recentTrends:N})},j=r=>{const i={};return r.forEach(f=>{const y=new Date(f.recorded_at).getHours().toString().padStart(2,"0")+":00";i[y]||(i[y]={count:0,engagement:0}),i[y].count++,i[y].engagement+=f.engagement}),Object.entries(i).map(([f,p])=>({time:f,engagement:p.engagement/p.count})).sort((f,p)=>{const y=parseInt(f.time.split(":")[0]),N=parseInt(p.time.split(":")[0]);return y-N})},c=r=>{const i={};return r.forEach(f=>{const p=new Date(f.recorded_at).toISOString().split("T")[0];i[p]||(i[p]={engagement:0,impressions:0,count:0}),i[p].engagement+=f.engagement,i[p].impressions+=f.impressions,i[p].count++}),Object.entries(i).map(([f,p])=>({date:f,engagement:p.engagement/p.count,impressions:p.impressions/p.count})).sort((f,p)=>new Date(f.date).getTime()-new Date(p.date).getTime()).slice(-7)};return{analytics:a,summary:h,loading:n,error:x,refresh:l}}function ka(){const{summary:t,loading:a,error:s}=Sa();return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-accent-500"})}):s?e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4",children:s}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Total Engagement"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.totalEngagement.toLocaleString()}),e.jsx("span",{className:"text-sm text-green-400",children:"+12% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Mt,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Total Impressions"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.totalImpressions.toLocaleString()}),e.jsx("span",{className:"text-sm text-green-400",children:"+8% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Engagement Rate"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[t.engagementRate.toFixed(2),"%"]}),e.jsx("span",{className:"text-sm text-green-400",children:"+2% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(le,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Total Shares"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"1,234"}),e.jsx("span",{className:"text-sm text-green-400",children:"+15% from last month"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Engagement Trends"}),e.jsx(M,{className:"w-5 h-5 text-accent-500"})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(zt,{data:t.recentTrends,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorEngagement",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f97316",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#f97316",stopOpacity:0})]})}),e.jsx(K,{dataKey:"date",stroke:"#94a3b8",fontSize:12,tickFormatter:h=>new Date(h).toLocaleDateString()}),e.jsx(B,{stroke:"#94a3b8",fontSize:12}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(qt,{type:"monotone",dataKey:"engagement",stroke:"#f97316",fillOpacity:1,fill:"url(#colorEngagement)"})]})})})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Platform Performance"}),e.jsx(Kt,{className:"w-5 h-5 text-accent-500"})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(Be,{data:Object.entries(t.platformBreakdown).map(([h,m])=>({platform:h,engagement:m.engagement,impressions:m.impressions})),children:[e.jsx(K,{dataKey:"platform",stroke:"#94a3b8",fontSize:12}),e.jsx(B,{stroke:"#94a3b8",fontSize:12}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(De,{dataKey:"engagement",fill:"#f97316",radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Best Posting Times"}),e.jsx(st,{className:"w-5 h-5 text-accent-500"})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(se,{data:t.timePerformance,children:[e.jsx(K,{dataKey:"time",stroke:"#94a3b8",fontSize:12}),e.jsx(B,{stroke:"#94a3b8",fontSize:12}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(Z,{type:"monotone",dataKey:"engagement",stroke:"#f97316",strokeWidth:2,dot:{fill:"#f97316",strokeWidth:2}})]})})})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Engagement Breakdown"}),e.jsx(He,{className:"w-5 h-5 text-accent-500"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 text-center",children:[e.jsx(He,{className:"w-5 h-5 text-accent-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-bold text-white",children:"2.1K"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Likes"})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 text-center",children:[e.jsx(be,{className:"w-5 h-5 text-accent-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-bold text-white",children:"856"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Comments"})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 text-center",children:[e.jsx(le,{className:"w-5 h-5 text-accent-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xl font-bold text-white",children:"432"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Shares"})]})]})]})]})]})}function bt(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ge,{}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Analytics Dashboard"})]})}),e.jsx(ka,{})]})}function Ca(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState(0),[n,u]=o.useState(!0),[x,d]=o.useState(null);return o.useEffect(()=>{if(!t)return;let c=!0;const r=async()=>{try{u(!0),d(null);const{data:f,error:p}=await O(()=>S.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}));if(p)throw p;c&&(s(f||[]),m((f==null?void 0:f.filter(y=>!y.read).length)||0))}catch(f){console.error("Error loading notifications:",f),c&&(d("Failed to load notifications"),s([]),m(0))}finally{c&&u(!1)}};r();const i=S.channel("notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${t.id}`},()=>{r()}).subscribe();return()=>{c=!1,i.unsubscribe()}},[t]),{notifications:a,unreadCount:h,loading:n,error:x,markAsRead:async c=>{if(t)try{const{error:r}=await O(()=>S.from("notifications").update({read:!0}).eq("id",c).eq("user_id",t.id));if(r)throw r;s(i=>i.map(f=>f.id===c?{...f,read:!0}:f)),m(i=>Math.max(0,i-1))}catch(r){throw console.error("Error marking notification as read:",r),r}},markAllAsRead:async()=>{if(t)try{const{error:c}=await O(()=>S.from("notifications").update({read:!0}).eq("user_id",t.id).eq("read",!1));if(c)throw c;s(r=>r.map(i=>({...i,read:!0}))),m(0)}catch(c){throw console.error("Error marking all notifications as read:",c),c}},deleteNotification:async c=>{if(t)try{const{error:r}=await O(()=>S.from("notifications").delete().eq("id",c).eq("user_id",t.id));if(r)throw r;s(i=>i.filter(f=>f.id!==c)),m(i=>{var f;return i-((f=a.find(p=>p.id===c))!=null&&f.read?0:1)})}catch(r){throw console.error("Error deleting notification:",r),r}}}}function Ea(){const{notifications:t,unreadCount:a,loading:s,markAsRead:h,markAllAsRead:m,deleteNotification:n}=Ca(),[u,x]=o.useState(!1);return s?null:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(!u),className:"relative p-2 text-primary-300 hover:text-white transition-colors",children:[e.jsx(nt,{className:"w-5 h-5"}),a>0&&e.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center w-4 h-4 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-accent-500 rounded-full",children:a})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-primary-700 rounded-lg shadow-lg overflow-hidden z-50",children:[e.jsx("div",{className:"p-4 border-b border-primary-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[a>0&&e.jsx("button",{onClick:()=>m(),className:"text-sm text-primary-300 hover:text-white transition-colors",children:"Mark all as read"}),e.jsx("button",{onClick:()=>x(!1),className:"text-primary-300 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?e.jsx("div",{className:"p-4 text-center text-primary-300",children:"No notifications"}):t.map(d=>e.jsx("div",{className:`p-4 border-b border-primary-600 ${d.read?"":"bg-primary-600/50"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:d.title}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:d.message}),e.jsx("p",{className:"text-xs text-primary-400 mt-2",children:new Date(d.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!d.read&&e.jsx("button",{onClick:()=>h(d.id),className:"p-1 text-primary-300 hover:text-white transition-colors",title:"Mark as read",children:e.jsx(it,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n(d.id),className:"p-1 text-primary-300 hover:text-red-400 transition-colors",title:"Delete",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]})},d.id))})]})]})}const Le={theme:"dark",email_notifications:!0};function _a(){const{user:t}=T(),[a,s]=o.useState(null),[h,m]=o.useState(!0),[n,u]=o.useState(null);return o.useEffect(()=>{if(!t)return;let d=!0;return(async()=>{try{m(!0),u(null);const{data:g,error:j}=await O(()=>S.from("user_settings").select("*").eq("user_id",t.id).maybeSingle());if(j&&j.code!=="PGRST116")throw j;if(g)d&&s(g);else{const{data:c,error:r}=await O(()=>S.from("user_settings").insert({user_id:t.id,...Le}).select().single());if(r)throw r;d&&s(c)}}catch(g){console.error("Error loading settings:",g),d&&(u("Failed to load settings"),s({id:"temp",user_id:t.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),...Le}))}finally{d&&m(!1)}})(),()=>{d=!1}},[t]),{settings:a,loading:h,error:n,updateSettings:async d=>{if(t)try{const{data:l,error:g}=await O(()=>S.from("user_settings").upsert({user_id:t.id,...Le,...d}).select().single());if(g)throw g;return s(l),l}catch(l){throw console.error("Error updating settings:",l),C("Failed to update settings"),l}}}}function Aa(){const{settings:t,loading:a,updateSettings:s}=_a(),[h,m]=o.useState(!1);return a?null:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>m(!h),className:"p-2 text-primary-300 hover:text-white transition-colors",children:e.jsx(pe,{className:"w-5 h-5"})}),h&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-primary-700 rounded-lg shadow-lg overflow-hidden z-50",children:[e.jsx("div",{className:"p-4 border-b border-primary-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Settings"}),e.jsx("button",{onClick:()=>m(!1),className:"text-primary-300 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-2",children:"Theme"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>s({theme:"light"}),className:`flex items-center gap-2 px-3 py-2 rounded-lg ${(t==null?void 0:t.theme)==="light"?"bg-accent-500 text-white":"bg-primary-600/50 text-primary-300 hover:text-white"}`,children:[e.jsx(Bt,{className:"w-4 h-4"}),"Light"]}),e.jsxs("button",{onClick:()=>s({theme:"dark"}),className:`flex items-center gap-2 px-3 py-2 rounded-lg ${(t==null?void 0:t.theme)==="dark"?"bg-accent-500 text-white":"bg-primary-600/50 text-primary-300 hover:text-white"}`,children:[e.jsx(Ut,{className:"w-4 h-4"}),"Dark"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-primary-200",children:[e.jsx(nt,{className:"w-4 h-4"}),"Email Notifications"]}),e.jsx("p",{className:"text-xs text-primary-400 mt-1 mb-2",children:"Receive email notifications for important updates"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t==null?void 0:t.email_notifications,onChange:n=>s({email_notifications:n.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-primary-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent-500/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-500"})]})]})]})]})]})}function Da(){const{user:t,signOut:a}=T(),[s,h]=o.useState("overview"),m=()=>{switch(s){case"customers":return e.jsx(yt,{});case"content":return e.jsx(va,{});case"analytics":return e.jsx(bt,{});case"overview":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Overview"}),e.jsx("p",{className:"text-primary-300",children:"Welcome to your dashboard!"})]}),e.jsxs(P,{to:"/analytics",className:"bg-primary-700/50 rounded-xl p-6 hover:bg-primary-700 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Oe,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Analytics"})]}),e.jsx("p",{className:"text-primary-300 group-hover:text-primary-200",children:"View comprehensive analytics and reports"})]}),e.jsxs(P,{to:"/customers",className:"bg-primary-700/50 rounded-xl p-6 hover:bg-primary-700 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Customer Management"})]}),e.jsx("p",{className:"text-primary-300 group-hover:text-primary-200",children:"Manage your customers, leads and interactions"})]}),e.jsxs(P,{to:"/seo",className:"bg-primary-700/50 rounded-xl p-6 hover:bg-primary-700 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ue,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"SEO Tracking"})]}),e.jsx("p",{className:"text-primary-300 group-hover:text-primary-200",children:"Monitor your keyword rankings and SEO performance"})]}),e.jsxs(P,{to:"/email",className:"bg-primary-700/50 rounded-xl p-6 hover:bg-primary-700 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Re,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Email Campaigns"})]}),e.jsx("p",{className:"text-primary-300 group-hover:text-primary-200",children:"Create and manage your email marketing campaigns"})]}),e.jsxs(P,{to:"/social",className:"bg-primary-700/50 rounded-xl p-6 hover:bg-primary-700 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(le,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Social Media"})]}),e.jsx("p",{className:"text-primary-300 group-hover:text-primary-200",children:"Manage your social media presence and analytics"})]}),e.jsxs(P,{to:"/budget",className:"bg-primary-700/50 rounded-xl p-6 hover:bg-primary-700 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(te,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Budget Management"})]}),e.jsx("p",{className:"text-primary-300 group-hover:text-primary-200",children:"Track and manage your marketing budgets and expenses"})]})]});default:return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-primary-300",children:"This section is coming soon!"})})}};return e.jsxs("div",{className:"min-h-screen bg-primary-800",children:[e.jsx("header",{className:"bg-primary-900/50 border-b border-primary-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ea,{}),e.jsx(Aa,{}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-primary-300",children:t==null?void 0:t.email}),e.jsx("button",{onClick:()=>a(),className:"text-primary-300 hover:text-white transition-colors",children:"Sign Out"})]})]})]})})}),e.jsx("nav",{className:"bg-primary-900/30 border-b border-primary-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>h("overview"),className:"px-3 py-4 text-sm font-medium "+(s==="overview"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Overview"]})}),e.jsx("button",{onClick:()=>h("analytics"),className:"px-3 py-4 text-sm font-medium "+(s==="analytics"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4"}),"Analytics"]})}),e.jsx("button",{onClick:()=>h("customers"),className:"px-3 py-4 text-sm font-medium "+(s==="customers"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Customers"]})}),e.jsx("button",{onClick:()=>h("content"),className:"px-3 py-4 text-sm font-medium "+(s==="content"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Content"]})})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:m()})]})}function Ia(){const t=we(),{user:a}=T(),[s,h]=o.useState(null);return o.useEffect(()=>{async function m(){try{const n=sessionStorage.getItem("connecting_platform"),u=sessionStorage.getItem("oauth_state");if(!n||!u)throw new Error("Invalid callback state");const x=new URLSearchParams(window.location.search),d=x.get("code"),l=x.get("state");if(!d||!l)throw new Error("Missing required parameters");if(l!==u)throw new Error("Invalid state parameter");const{error:g}=await S.from("social_media_accounts").insert({user_id:a==null?void 0:a.id,platform:n,account_name:`${n}_user`,access_token:d,status:"active"});if(g)throw g;sessionStorage.removeItem("connecting_platform"),sessionStorage.removeItem("oauth_state"),t("/social")}catch(n){console.error("Error handling callback:",n),h(n instanceof Error?n.message:"Failed to connect account")}}m()},[t,a]),s?e.jsx("div",{className:"min-h-screen bg-primary-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4 max-w-md",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:"Connection Failed"}),e.jsx("p",{children:s}),e.jsx("button",{onClick:()=>t("/social"),className:"mt-4 text-white bg-red-500 px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Return to Dashboard"})]})}):e.jsx("div",{className:"min-h-screen bg-primary-800 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-accent-500"})})}function Ra(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState(!0),[n,u]=o.useState(null);o.useEffect(()=>{t&&x()},[t]);const x=async()=>{try{m(!0),u(null);const{data:c,error:r}=await S.from("seo_tracking").select("*").eq("user_id",t==null?void 0:t.id).order("tracked_at",{ascending:!1});if(r)throw r;s(c||[])}catch(c){console.error("Error loading SEO trackings:",c),u("Failed to load SEO tracking data"),C("Failed to load SEO tracking data")}finally{m(!1)}};return{trackings:a,loading:h,error:n,addKeyword:async(c,r)=>{try{const{data:i,error:f}=await S.from("seo_tracking").insert({keyword:c,url:r,user_id:t==null?void 0:t.id}).select().single();if(f)throw f;return s(p=>[i,...p]),_("Keyword added successfully"),i}catch(i){throw console.error("Error adding keyword:",i),C("Failed to add keyword"),i}},updateKeyword:async(c,r)=>{try{const{data:i,error:f}=await S.from("seo_tracking").update(r).eq("id",c).eq("user_id",t==null?void 0:t.id).select().single();if(f)throw f;return s(p=>p.map(y=>y.id===c?i:y)),_("Keyword updated successfully"),i}catch(i){throw console.error("Error updating keyword:",i),C("Failed to update keyword"),i}},updateRanking:async(c,r)=>{try{const{data:i,error:f}=await S.from("seo_tracking").update({ranking:r,tracked_at:new Date().toISOString()}).eq("id",c).eq("user_id",t==null?void 0:t.id).select().single();if(f)throw f;const{error:p}=await S.from("seo_historical_data").insert({keyword_id:c,ranking:r,user_id:t==null?void 0:t.id});if(p)throw p;return s(y=>y.map(N=>N.id===c?i:N)),_("Ranking updated successfully"),i}catch(i){throw console.error("Error updating ranking:",i),C("Failed to update ranking"),i}},deleteKeyword:async c=>{try{const{error:r}=await S.from("seo_tracking").delete().eq("id",c).eq("user_id",t==null?void 0:t.id);if(r)throw r;s(i=>i.filter(f=>f.id!==c)),_("Keyword deleted successfully")}catch(r){throw console.error("Error deleting keyword:",r),C("Failed to delete keyword"),r}},refresh:x}}function Ta(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState([]),[n,u]=o.useState([]),[x,d]=o.useState([]),[l,g]=o.useState(!0),[j,c]=o.useState(null);o.useEffect(()=>{t&&r()},[t]);const r=async()=>{try{g(!0),c(null);const[y,N,w,b]=await Promise.all([S.from("seo_competitor_tracking").select("*").order("tracked_at",{ascending:!1}),S.from("seo_historical_data").select("*").order("tracked_at",{ascending:!0}),S.from("seo_backlinks").select("*").order("last_checked",{ascending:!1}),S.from("seo_page_metrics").select("*").order("checked_at",{ascending:!1})]);if(y.error)throw y.error;if(N.error)throw N.error;if(w.error)throw w.error;if(b.error)throw b.error;s(y.data||[]),m(N.data||[]),u(w.data||[]),d(b.data||[])}catch(y){console.error("Error loading SEO data:",y),c("Failed to load SEO data")}finally{g(!1)}};return{competitors:a,historicalData:h,backlinks:n,pageMetrics:x,loading:l,error:j,addCompetitor:async(y,N)=>{try{const{data:w,error:b}=await S.from("seo_competitor_tracking").insert({keyword_id:y,competitor_url:N,user_id:t==null?void 0:t.id}).select().single();if(b)throw b;return s(k=>[w,...k]),w}catch(w){throw console.error("Error adding competitor:",w),w}},addBacklink:async(y,N,w)=>{try{const{data:b,error:k}=await S.from("seo_backlinks").insert({source_url:y,target_url:N,domain_authority:w,user_id:t==null?void 0:t.id}).select().single();if(k)throw k;return u(E=>[b,...E]),b}catch(b){throw console.error("Error adding backlink:",b),b}},updatePageMetrics:async(y,N)=>{try{const{data:w,error:b}=await S.from("seo_page_metrics").insert({url:y,...N,user_id:t==null?void 0:t.id}).select().single();if(b)throw b;return d(k=>[w,...k]),w}catch(w){throw console.error("Error updating page metrics:",w),w}},refresh:r}}function Pa({url:t,onAudit:a}){const[s,h]=o.useState(!1),[m,n]=o.useState(null),[u,x]=o.useState([]),d=async()=>{h(!0);try{const l={score:75,issues:[{type:"meta",severity:"high",message:"Missing meta descriptions on 5 pages",pages:["/blog","/products","/about"]},{type:"speed",severity:"medium",message:"Slow loading time on mobile devices",details:"Average load time: 4.2s"}]};n(l.score),x(l.issues),a(l)}catch(l){console.error("Audit error:",l)}finally{h(!1)}};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"SEO Audit"})]}),e.jsxs("button",{onClick:d,disabled:s,className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),s?"Running Audit...":"Start Audit"]})]}),m!==null&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-primary-200",children:"SEO Score"}),e.jsx(Ht,{className:"w-4 h-4 text-accent-500"})]}),e.jsxs("p",{className:"text-3xl font-bold text-white mt-2",children:[m,"/100"]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-primary-200",children:"Critical Issues"}),e.jsx(F,{className:"w-4 h-4 text-red-500"})]}),e.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:u.filter(l=>l.severity==="high").length})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-primary-200",children:"Opportunities"}),e.jsx(A,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:u.filter(l=>l.severity==="medium").length})]})]}),u.length>0&&e.jsx("div",{className:"space-y-4",children:u.map((l,g)=>e.jsxs("div",{className:`bg-primary-600/50 rounded-lg p-4 flex items-start gap-3 ${l.severity==="high"?"border-l-4 border-red-500":"border-l-4 border-yellow-500"}`,children:[l.severity==="high"?e.jsx(F,{className:"w-5 h-5 text-red-500 mt-0.5"}):e.jsx(je,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:l.message}),l.details&&e.jsx("p",{className:"text-primary-300 text-sm mt-1",children:l.details}),l.pages&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-primary-300",children:"Affected pages:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:l.pages.map(j=>e.jsx("span",{className:"px-2 py-1 text-xs bg-primary-500/50 rounded-full text-primary-200",children:j},j))})]})]})]},g))})]})})}function Fa(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState([]),[n,u]=o.useState(!0),[x,d]=o.useState(null);o.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{u(!0),d(null);const[c,r]=await Promise.all([S.from("seo_keyword_research").select("*").order("created_at",{ascending:!1}),S.from("seo_content_suggestions").select("*").order("updated_at",{ascending:!1})]);if(c.error)throw c.error;if(r.error)throw r.error;s(c.data||[]),m(r.data||[])}catch(c){console.error("Error loading SEO research data:",c),d("Failed to load SEO research data")}finally{u(!1)}};return{keywordResearch:a,contentSuggestions:h,loading:n,error:x,addKeywordResearch:async(c,r,i,f,p)=>{try{const{data:y,error:N}=await S.from("seo_keyword_research").insert({keyword:c,search_volume:r,difficulty:i,cpc:f,related_keywords:p,user_id:t==null?void 0:t.id}).select().single();if(N)throw N;return s(w=>[y,...w]),y}catch(y){throw console.error("Error adding keyword research:",y),y}},addContentSuggestion:async(c,r,i,f)=>{try{const{data:p,error:y}=await S.from("seo_content_suggestions").insert({url:c,target_keyword:r,content_score:i,suggestions:f,user_id:t==null?void 0:t.id}).select().single();if(y)throw y;return m(N=>[p,...N]),p}catch(p){throw console.error("Error adding content suggestion:",p),p}},refresh:l}}function $a({onKeywordSelect:t}){const{keywordResearch:a,contentSuggestions:s,loading:h,addKeywordResearch:m}=Fa(),[n,u]=o.useState(""),[x,d]=o.useState(!1),[l,g]=o.useState(null),j=async()=>{if(n){d(!0);try{await m(n,Math.floor(Math.random()*1e4),Math.random()*100,Math.random()*10,c(n))}catch(r){console.error("Analysis error:",r)}finally{d(!1)}}},c=r=>{const i=["best","top","how to","why","when"],f=["guide","tutorial","tips","examples","services"];return[...i.map(p=>`${p} ${r}`),...f.map(p=>`${r} ${p}`)]};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-primary-400 w-5 h-5"}),e.jsx("input",{type:"text",value:n,onChange:r=>u(r.target.value),placeholder:"Enter a keyword to analyze...",className:"w-full pl-12 pr-4 py-3 bg-primary-600 border-primary-500 rounded-lg text-white placeholder-primary-400"})]})}),e.jsxs("button",{onClick:j,disabled:x||!n,className:"btn-primary py-3 px-6 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),x?"Analyzing...":"Analyze"]})]}),a.length>0&&e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Search Volume"}),e.jsx(M,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a[0].search_volume.toLocaleString()})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Difficulty"}),e.jsx(Te,{className:"w-4 h-4 text-accent-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[a[0].difficulty.toFixed(1),"/100"]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"CPC"}),e.jsx(te,{className:"w-4 h-4 text-accent-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",a[0].cpc.toFixed(2)]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Related Keywords"}),e.jsx(ue,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a[0].related_keywords.length})]})]})]}),a.length>0&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Related Keywords"}),e.jsx("div",{className:"space-y-3",children:a[0].related_keywords.map((r,i)=>e.jsxs("div",{className:"flex items-center justify-between bg-primary-600/50 rounded-lg p-3 cursor-pointer hover:bg-primary-600 transition-colors",onClick:()=>{g(r),t(r)},children:[e.jsx("span",{className:"text-white",children:r}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-primary-300",children:["Volume: ",Math.floor(Math.random()*1e3).toLocaleString()]}),e.jsxs("span",{className:"text-primary-300",children:["KD: ",Math.floor(Math.random()*100)]})]})]},i))})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Search Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(se,{data:[{month:"Jan",volume:1200},{month:"Feb",volume:1400},{month:"Mar",volume:1100},{month:"Apr",volume:1600},{month:"May",volume:1800},{month:"Jun",volume:2e3}],children:[e.jsx(K,{dataKey:"month",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8"}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(Z,{type:"monotone",dataKey:"volume",stroke:"#f97316",strokeWidth:2})]})})})]})]})]})}function La({onIssueFixed:t}){const[a,s]=o.useState(!1),[h,m]=o.useState("health"),[n,u]=o.useState([]),x=async()=>{s(!0);try{u([{type:"critical",category:"health",issue:"Missing SSL Certificate",impact:"Security and SEO",recommendation:"Install SSL certificate to enable HTTPS"},{type:"warning",category:"mobile",issue:"Non-responsive elements detected",impact:"Mobile UX",recommendation:"Update CSS for mobile responsiveness"},{type:"critical",category:"speed",issue:"Large unoptimized images",impact:"Page Load Speed",recommendation:"Compress and optimize images"}])}catch(l){console.error("Scan error:",l)}finally{s(!1)}},d=()=>{switch(h){case"health":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"SSL Status"}),e.jsx(je,{className:"w-4 h-4 text-green-400"})]}),e.jsx("p",{className:"text-white font-medium",children:"Secure (HTTPS)"})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Robots.txt"}),e.jsx(F,{className:"w-4 h-4 text-yellow-400"})]}),e.jsx("p",{className:"text-white font-medium",children:"Needs Update"})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Sitemap"}),e.jsx(je,{className:"w-4 h-4 text-green-400"})]}),e.jsx("p",{className:"text-white font-medium",children:"Valid XML"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Health Check Results"}),e.jsx("div",{className:"space-y-3",children:n.filter(l=>l.category==="health").map((l,g)=>e.jsx("div",{className:`p-4 rounded-lg ${l.type==="critical"?"bg-red-500/10 border-l-4 border-red-500":"bg-yellow-500/10 border-l-4 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[l.type==="critical"?e.jsx(F,{className:"w-5 h-5 text-red-500 mt-0.5"}):e.jsx(F,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:l.issue}),e.jsx("p",{className:"text-primary-300 text-sm mt-1",children:l.recommendation})]})]})},g))})]})]});case"mobile":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-white",children:"Mobile Score"}),e.jsx(Jt,{className:"w-5 h-5 text-accent-500"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"86"}),e.jsx("div",{className:"text-sm text-primary-300",children:"/ 100"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-white",children:"Viewport"}),e.jsx(je,{className:"w-5 h-5 text-green-400"})]}),e.jsx("p",{className:"text-primary-300",children:"Properly configured for mobile devices"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Mobile Issues"}),e.jsx("div",{className:"space-y-3",children:n.filter(l=>l.category==="mobile").map((l,g)=>e.jsx("div",{className:"p-4 bg-primary-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:l.issue}),e.jsx("p",{className:"text-primary-300 text-sm mt-1",children:l.recommendation})]})]})},g))})]})]});case"speed":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"Load Time"}),e.jsx(ne,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"2.3s"})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"First Paint"}),e.jsx(ne,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"0.8s"})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-200",children:"TTFB"}),e.jsx(ne,{className:"w-4 h-4 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"180ms"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-4",children:"Speed Optimization"}),e.jsx("div",{className:"space-y-3",children:n.filter(l=>l.category==="speed").map((l,g)=>e.jsx("div",{className:"p-4 bg-primary-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:l.issue}),e.jsx("p",{className:"text-primary-300 text-sm mt-1",children:l.recommendation}),e.jsx("button",{onClick:()=>t(l),className:"mt-2 text-sm text-accent-500 hover:text-accent-400",children:"Fix Issue"})]})]})},g))})]})]});case"crawl":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-white",children:"Crawl Status"}),e.jsx(ue,{className:"w-5 h-5 text-accent-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-white",children:"Crawlable"})]})]}),e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-white",children:"Indexed Pages"}),e.jsx(We,{className:"w-5 h-5 text-accent-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"128"})]})]}),e.jsx("div",{className:"bg-primary-600/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-white",children:"Crawl Configuration"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"btn-secondary py-2 px-4 flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Download Sitemap"]}),e.jsxs("button",{className:"btn-secondary py-2 px-4 flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4"}),"View robots.txt"]})]})]})})]})}};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"Technical SEO"})]}),e.jsxs("button",{onClick:x,disabled:a,className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(Wt,{className:`w-4 h-4 ${a?"animate-spin":""}`}),a?"Scanning...":"Run Scan"]})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-primary-600 mb-6",children:[e.jsx("button",{onClick:()=>m("health"),className:`px-4 py-2 ${h==="health"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:"Site Health"}),e.jsx("button",{onClick:()=>m("mobile"),className:`px-4 py-2 ${h==="mobile"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:"Mobile Usability"}),e.jsx("button",{onClick:()=>m("speed"),className:`px-4 py-2 ${h==="speed"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:"Page Speed"}),e.jsx("button",{onClick:()=>m("crawl"),className:`px-4 py-2 ${h==="crawl"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:"Crawlability"})]}),d()]})})}function Oa(){const{trackings:t,loading:a,error:s,addKeyword:h,updateKeyword:m,updateRanking:n,deleteKeyword:u}=Ra();Ta();const[x,d]=o.useState("tracking"),[l,g]=o.useState(!1),[j,c]=o.useState(""),[r,i]=o.useState(""),f=()=>{switch(x){case"audit":return e.jsx(Pa,{url:"https://example.com",onAudit:p=>{console.log("Audit results:",p)}});case"research":return e.jsx($a,{onKeywordSelect:p=>{console.log("Selected keyword:",p)}});case"technical":return e.jsx(La,{onIssueFixed:p=>{console.log("Fixed issue:",p)}});default:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Keyword Tracking"}),e.jsxs("button",{onClick:()=>g(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Add Keyword"]})]}),e.jsx("div",{className:"bg-primary-700/50 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary-600",children:[e.jsx("th",{className:"text-left p-4 text-primary-200",children:"Keyword"}),e.jsx("th",{className:"text-left p-4 text-primary-200",children:"URL"}),e.jsx("th",{className:"text-center p-4 text-primary-200",children:"Ranking"}),e.jsx("th",{className:"text-center p-4 text-primary-200",children:"Change"}),e.jsx("th",{className:"text-center p-4 text-primary-200",children:"Last Updated"}),e.jsx("th",{className:"text-right p-4 text-primary-200",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(p=>e.jsxs("tr",{className:"border-b border-primary-600/50",children:[e.jsx("td",{className:"p-4 text-white",children:p.keyword}),e.jsx("td",{className:"p-4",children:p.url?e.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"text-accent-500 hover:text-accent-400 flex items-center gap-1",children:[new URL(p.url).hostname,e.jsx(Xt,{className:"w-3 h-3"})]}):e.jsx("span",{className:"text-primary-400",children:"-"})}),e.jsx("td",{className:"p-4 text-center text-white",children:p.ranking||"-"}),e.jsx("td",{className:"p-4 text-center",children:p.ranking?p.ranking>0?e.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-400",children:[e.jsx(Zt,{className:"w-4 h-4"}),e.jsx("span",{children:p.ranking})]}):e.jsxs("div",{className:"flex items-center justify-center gap-1 text-red-400",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:Math.abs(p.ranking)})]}):e.jsx(es,{className:"w-4 h-4 text-primary-400 mx-auto"})}),e.jsx("td",{className:"p-4 text-center text-primary-300",children:new Date(p.tracked_at).toLocaleDateString()}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>m(p.id,{keyword:p.keyword}),className:"text-primary-400 hover:text-white transition-colors",children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(p.id),className:"text-primary-400 hover:text-red-400 transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]})})]},p.id))})]})})]})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ge,{}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"SEO Management"}),e.jsx($e,{feature:"SEO Optimization"})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-primary-700",children:[e.jsx("button",{onClick:()=>d("tracking"),className:`px-4 py-2 ${x==="tracking"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Keyword Tracking"]})}),e.jsx("button",{onClick:()=>d("audit"),className:`px-4 py-2 ${x==="audit"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"SEO Audit"]})}),e.jsx("button",{onClick:()=>d("research"),className:`px-4 py-2 ${x==="research"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4"}),"Keyword Research"]})}),e.jsx("button",{onClick:()=>d("technical"),className:`px-4 py-2 ${x==="technical"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Technical SEO"]})})]}),f(),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-primary-700 rounded-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Add Keyword"}),e.jsx("button",{onClick:()=>g(!1),className:"text-primary-300 hover:text-white",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsx("form",{onSubmit:async p=>{p.preventDefault(),await h(j,r),g(!1),c(""),i("")},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-1",children:"Keyword"}),e.jsx("input",{type:"text",value:j,onChange:p=>c(p.target.value),className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-1",children:"Target URL (optional)"}),e.jsx("input",{type:"url",value:r,onChange:p=>i(p.target.value),className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",placeholder:"https://example.com/page"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-primary-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary py-2 px-6",children:"Add Keyword"})]})]})})]})})]})}function Nt(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState([]),[n,u]=o.useState([]),[x,d]=o.useState({}),[l,g]=o.useState(!0),[j,c]=o.useState(null);o.useEffect(()=>{if(!t)return;let N=!0;r();const w=S.channel("email_campaigns_changes").on("postgres_changes",{event:"*",schema:"public",table:"email_campaigns",filter:`user_id=eq.${t.id}`},()=>{N&&r()}).subscribe();return()=>{N=!1,w.unsubscribe()}},[t]);const r=async()=>{try{g(!0),c(null);const[N,w,b,k]=await Promise.all([S.from("email_campaigns").select("*").eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1}),S.from("email_templates").select("*").eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1}),S.from("email_subscribers").select("*").eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1}),S.from("campaign_analytics").select("*").eq("user_id",t==null?void 0:t.id)]);if(N.error)throw N.error;if(w.error)throw w.error;if(b.error)throw b.error;if(k.error)throw k.error;s(N.data||[]),m(w.data||[]),u(b.data||[]);const E=(k.data||[]).reduce((D,$)=>(D[$.campaign_id]=$,D),{});d(E)}catch(N){console.error("Error loading email campaign data:",N),c("Failed to load email campaign data"),C("Failed to load email campaign data. Retrying..."),setTimeout(r,5e3)}finally{g(!1)}};return{campaigns:a,templates:h,subscribers:n,analytics:x,loading:l,error:j,createTemplate:async(N,w,b)=>{try{const{data:k,error:E}=await S.from("email_templates").insert({name:N,subject:w,content:b,user_id:t==null?void 0:t.id}).select().single();if(E)throw E;return m(D=>[k,...D]),_("Template created successfully"),k}catch(k){throw console.error("Error creating template:",k),C("Failed to create template"),k}},createCampaign:async(N,w,b)=>{try{const{data:k,error:E}=await S.from("email_campaigns").insert({name:N,template_id:w,scheduled_for:b==null?void 0:b.toISOString(),status:b?"scheduled":"draft",user_id:t==null?void 0:t.id}).select().single();if(E)throw E;return s(D=>[k,...D]),_("Campaign created successfully"),k}catch(k){throw console.error("Error creating campaign:",k),C("Failed to create campaign"),k}},addSubscriber:async(N,w)=>{try{const{data:b,error:k}=await S.from("email_subscribers").insert({email:N,name:w,user_id:t==null?void 0:t.id,status:"active"}).select().single();if(k)throw k;return u(E=>[b,...E]),_("Subscriber added successfully"),b}catch(b){throw console.error("Error adding subscriber:",b),C("Failed to add subscriber"),b}},updateCampaignStatus:async(N,w)=>{try{const{data:b,error:k}=await S.from("email_campaigns").update({status:w}).eq("id",N).eq("user_id",t==null?void 0:t.id).select().single();if(k)throw k;return s(E=>E.map(D=>D.id===N?b:D)),_("Campaign status updated successfully"),b}catch(b){throw console.error("Error updating campaign status:",b),C("Failed to update campaign status"),b}},refresh:r}}function Ma(){const{createCampaign:t}=Nt(),[a,s]=o.useState(!1),[h,m]=o.useState(null);return{scheduleAutomatedCampaigns:async(u,x="weekly",d="10:00",l=4)=>{try{s(!0),m(null);const g=new Date,j=[];for(let c=0;c<l;c++){const r=new Date(g);switch(x){case"daily":r.setDate(r.getDate()+c);break;case"weekly":r.setDate(r.getDate()+c*7);break;case"monthly":r.setMonth(r.getMonth()+c);break}const[i,f]=d.split(":");r.setHours(parseInt(i,10),parseInt(f,10),0,0),j.push({name:`Automated Campaign ${c+1}`,scheduledFor:r})}await Promise.all(j.map(c=>t(c.name,u,c.scheduledFor)))}catch(g){throw m("Failed to schedule automated campaigns"),console.error("Automation error:",g),g}finally{s(!1)}},isScheduling:a,error:h}}function za({templates:t=[],onSave:a,onAIAssist:s}){const[h,m]=o.useState(""),[n,u]=o.useState(""),[x,d]=o.useState(""),[l,g]=o.useState(!1),{generateContent:j}=me(),c=async i=>{try{g(!0);const f=i==="subject"?`Generate an engaging email subject line about: ${h||"our product/service"}`:`Generate engaging email content about: ${n||"our product/service"}`,p=s?await s(i,f):await j(f,"email");i==="subject"?m(p.content):u(p.content)}catch(f){console.error("Error generating content:",f),C("Failed to generate content. Please try again.")}finally{g(!1)}},r=async()=>{if(!h||!n){C("Please provide both subject and content");return}try{await a({subject:h,content:n,template_id:x||null})}catch(i){console.error("Error saving campaign:",i),C("Failed to save campaign")}};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Campaign Builder"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-2",children:"Start with a Template"}),e.jsxs("select",{value:x,onChange:i=>d(i.target.value),className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",children:[e.jsx("option",{value:"",children:"Select a template"}),t.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Subject Line"}),e.jsxs("button",{onClick:()=>c("subject"),disabled:l,className:"text-accent-500 hover:text-accent-400 text-sm flex items-center gap-1",children:[e.jsx(Ae,{className:"w-4 h-4"}),"AI Assist"]})]}),e.jsx("input",{type:"text",value:h,onChange:i=>m(i.target.value),className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",placeholder:"Enter email subject..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Email Content"}),e.jsxs("button",{onClick:()=>c("content"),disabled:l,className:"text-accent-500 hover:text-accent-400 text-sm flex items-center gap-1",children:[e.jsx(Ae,{className:"w-4 h-4"}),"AI Assist"]})]}),e.jsxs("div",{className:"bg-primary-600 border border-primary-500 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-primary-500",children:[e.jsx("button",{className:"p-1.5 hover:bg-primary-500 rounded",children:e.jsx(ts,{className:"w-4 h-4 text-primary-300"})}),e.jsx("button",{className:"p-1.5 hover:bg-primary-500 rounded",children:e.jsx(ss,{className:"w-4 h-4 text-primary-300"})}),e.jsx("button",{className:"p-1.5 hover:bg-primary-500 rounded",children:e.jsx(as,{className:"w-4 h-4 text-primary-300"})})]}),e.jsx("textarea",{value:n,onChange:i=>u(i.target.value),rows:12,className:"w-full bg-transparent border-none text-white px-4 py-2 focus:ring-0",placeholder:"Write your email content..."})]})]}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsxs("button",{onClick:r,disabled:!h||!n,className:"btn-primary py-2 px-6 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(rs,{className:"w-4 h-4"}),"Save Campaign"]})})]})})}const qa=["#f97316","#3b82f6","#10b981","#8b5cf6"];function Ka({campaigns:t,analytics:a,onAnalyze:s}){var n;o.useState(null);const[h,m]=o.useState(null);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Re,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Open Rate"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"24.8%"}),e.jsx("span",{className:"text-sm text-green-400",children:"+2.1% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Click Rate"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"3.2%"}),e.jsx("span",{className:"text-sm text-green-400",children:"+0.5% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(te,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Revenue"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"$12,450"}),e.jsx("span",{className:"text-sm text-green-400",children:"+15% from last month"})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Subscribers"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"8,234"}),e.jsx("span",{className:"text-sm text-green-400",children:"+123 this month"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Open Rates Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(se,{data:t,children:[e.jsx(K,{dataKey:"name",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8"}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(Z,{type:"monotone",dataKey:"openRate",stroke:"#f97316",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Click Distribution"}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(xe,{children:[e.jsx(he,{data:[{name:"CTA 1",value:400},{name:"CTA 2",value:300},{name:"Links",value:200},{name:"Images",value:100}],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:qa.map((u,x)=>e.jsx(oe,{fill:u},x))}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}})]})})})]})]}),h&&e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"AI Insights"})]}),e.jsx("div",{className:"grid gap-4",children:(n=h.recommendations)==null?void 0:n.map((u,x)=>e.jsxs("div",{className:"bg-primary-600/50 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-white",children:u})})]},x))})]})]})}function Ba({subscribers:t=[],onSegment:a}){return o.useState("all"),o.useState(!1),t.length,t.filter(s=>s.status==="active").length,t.filter(s=>s.engagement_score>7).length,t.filter(s=>s.status==="inactive").length,e.jsx("div",{className:"space-y-6"})}function Ua({businessType:t,onSelect:a}){const[s,h]=o.useState(null),m=[{id:"1",title:"Welcome Series",description:"Introduce new subscribers to your brand with a 3-part welcome series",type:"automation",roi:"150%",difficulty:"Easy"},{id:"2",title:"Re-engagement Campaign",description:"Win back inactive subscribers with personalized offers",type:"targeted",roi:"120%",difficulty:"Medium"},{id:"3",title:"Product Launch",description:"Build excitement for your upcoming product launch",type:"promotional",roi:"200%",difficulty:"Medium"},{id:"4",title:"Customer Feedback",description:"Gather valuable insights from your customers",type:"engagement",roi:"100%",difficulty:"Easy"}];return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"AI Campaign Suggestions"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-6",children:m.map(n=>e.jsxs("div",{className:`bg-primary-600/50 rounded-lg p-6 cursor-pointer transition-all ${s===n.id?"ring-2 ring-accent-500":"hover:bg-primary-600"}`,onClick:()=>h(n.id),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-2",children:n.title}),e.jsx("p",{className:"text-primary-300 mb-4",children:n.description})]}),e.jsx(Ae,{className:"w-5 h-5 text-accent-500"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-primary-300",children:["Expected ROI: ",e.jsx("span",{className:"text-green-400",children:n.roi})]}),e.jsxs("span",{className:"text-primary-300",children:["Difficulty: ",e.jsx("span",{className:"text-primary-200",children:n.difficulty})]})]}),s===n.id&&e.jsxs("button",{onClick:()=>a(n),className:"mt-4 w-full btn-primary py-2 flex items-center justify-center gap-2",children:["Use This Template",e.jsx(et,{className:"w-4 h-4"})]})]},n.id))})]})})}function Va({templates:t=[],onCreateTemplate:a}){return o.useState(!1),e.jsx("div",{className:"space-y-6"})}function Ha(){const{campaigns:t,templates:a,subscribers:s,analytics:h,loading:m,error:n}=Nt();Ma();const{generateEmailContent:u,analyzePerformance:x}=me(),[d,l]=o.useState("builder"),[g,j]=o.useState(!1),c=()=>{switch(d){case"builder":return e.jsx(za,{templates:a,onSave:async r=>{console.log("Saving campaign:",r)},onAIAssist:async(r,i)=>await u(i,{type:r,audience:"target_segment",goal:"conversion"})});case"analytics":return e.jsx(Ka,{campaigns:t,analytics:h,onAnalyze:async r=>await x(r)});case"leads":return e.jsx(Ba,{subscribers:s,onSegment:async r=>{console.log("Segmenting leads:",r)}});case"templates":return e.jsx(Va,{templates:a,onCreateTemplate:async r=>{console.log("Creating template:",r)}});case"suggestions":return e.jsx(Ua,{businessType:"retail",onSelect:async r=>{console.log("Selected suggestion:",r)}});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ge,{}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Email Campaigns"}),e.jsx($e,{feature:"Campaign Optimization"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("button",{onClick:()=>j(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"New Campaign"]})})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-primary-700",children:[e.jsx("button",{onClick:()=>l("builder"),className:`px-4 py-2 ${d==="builder"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Campaign Builder"]})}),e.jsx("button",{onClick:()=>l("analytics"),className:`px-4 py-2 ${d==="analytics"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Analytics"]})}),e.jsx("button",{onClick:()=>l("leads"),className:`px-4 py-2 ${d==="leads"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Lead Management"]})}),e.jsx("button",{onClick:()=>l("templates"),className:`px-4 py-2 ${d==="templates"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Templates"]})}),e.jsx("button",{onClick:()=>l("suggestions"),className:`px-4 py-2 ${d==="suggestions"?"text-accent-500 border-b-2 border-accent-500":"text-primary-300 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"AI Suggestions"]})})]}),e.jsx("div",{className:"min-h-[600px]",children:c()})]})}function wt(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState([]),[n,u]=o.useState(!0),[x,d]=o.useState(null);return o.useEffect(()=>{if(!t)return;let c=!0;const r=async()=>{try{u(!0),d(null);const[p,y]=await Promise.all([S.from("social_media_accounts").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}),S.from("social_media_posts").select("*").eq("user_id",t.id).order("created_at",{ascending:!1})]);if(p.error)throw p.error;if(y.error)throw y.error;c&&(s(p.data||[]),m(y.data||[]))}catch(p){console.error("Error loading social media data:",p),c&&(d("Failed to load social media data"),C("Failed to load social media data"))}finally{c&&u(!1)}};r();const i=S.channel("social_accounts_changes").on("postgres_changes",{event:"*",schema:"public",table:"social_media_accounts",filter:`user_id=eq.${t.id}`},()=>{c&&r()}).subscribe(),f=S.channel("social_posts_changes").on("postgres_changes",{event:"*",schema:"public",table:"social_media_posts",filter:`user_id=eq.${t.id}`},()=>{c&&r()}).subscribe();return()=>{c=!1,i.unsubscribe(),f.unsubscribe()}},[t]),{accounts:a,posts:h,loading:n,error:x,addAccount:async(c,r)=>{try{const{data:i,error:f}=await S.from("social_media_accounts").insert({platform:c,account_name:r,user_id:t==null?void 0:t.id,status:"active"}).select().single();if(f)throw f;return s(p=>[i,...p]),_("Account added successfully"),i}catch(i){throw console.error("Error adding social media account:",i),C("Failed to add account"),i}},createPost:async(c,r,i=[],f)=>{try{const p=a.find(w=>w.id===c);if(!p)throw new Error("Account not found");const{data:y,error:N}=await S.from("social_media_posts").insert({account_id:c,content:r,media_urls:i,platform:p.platform,scheduled_for:f==null?void 0:f.toISOString(),status:f?"scheduled":"draft",user_id:t==null?void 0:t.id}).select().single();if(N)throw N;return m(w=>[y,...w]),_("Post created successfully"),y}catch(p){throw console.error("Error creating post:",p),C("Failed to create post"),p}},updatePostStatus:async(c,r,i)=>{try{const{data:f,error:p}=await S.from("social_media_posts").update({status:r,published_at:i==null?void 0:i.toISOString()}).eq("id",c).eq("user_id",t==null?void 0:t.id).select().single();if(p)throw p;return m(y=>y.map(N=>N.id===c?f:N)),_("Post status updated successfully"),f}catch(f){throw console.error("Error updating post status:",f),C("Failed to update post status"),f}}}}const Wa=["marketing","digital","business","socialmedia","entrepreneur","success","motivation","startup","innovation","growth","leadership","inspiration","technology","strategy","branding"],Ze=["business","technology","office","marketing","workspace","startup","meeting","professional"];function Ga(){const{createPost:t,accounts:a}=wt(),{generateSocialContent:s}=me(),[h,m]=o.useState(!1),[n,u]=o.useState(null),x=g=>({twitter:["9:00","12:00","15:00","17:00","19:00"],facebook:["9:00","13:00","15:00","19:00"],instagram:["11:00","14:00","19:00","21:00"],linkedin:["8:00","10:00","12:00","17:00"]})[g]||["12:00"],d=async(g,j)=>{try{const c=["Share industry insights about","Discuss the latest trends in","Offer tips and advice about","Share success stories related to","Ask engaging questions about"],r=`${c[Math.floor(Math.random()*c.length)]} ${j.join(", ")}`,i=await s(r,g,{tone:"professional",length:g==="twitter"?"short":"medium"});if(!i)throw new Error("Failed to generate content");return i}catch(c){throw console.error("Error generating content:",c),new Error("Failed to generate post content")}};return{scheduleAutomatedPosts:async(g,j={duration:7,postsPerDay:2,topics:["marketing","business","technology"],includeImages:!0,includeHashtags:!0})=>{try{m(!0),u(null);const c=a.find(y=>y.id===g);if(!c)throw new Error("Selected account not found");if(j.duration<1||j.duration>30)throw new Error("Duration must be between 1 and 30 days");if(j.postsPerDay<1||j.postsPerDay>5)throw new Error("Posts per day must be between 1 and 5");if(!j.topics.length)throw new Error("At least one topic is required");const r=c.platform,i=x(r),f=j.duration*j.postsPerDay,p=[];for(let y=0;y<j.duration;y++){const N=new Date;N.setDate(N.getDate()+y);const w=[...i].sort(()=>.5-Math.random()).slice(0,j.postsPerDay);for(const b of w){const[k,E]=b.split(":").map(Number),D=new Date(N);D.setHours(k,E,0,0);try{const $=await d(r,j.topics),W=j.includeHashtags?Wa.sort(()=>.5-Math.random()).slice(0,3).map(fe=>`#${fe}`).join(" "):"",z=j.includeImages?[`https://source.unsplash.com/1200x800/?${Ze[Math.floor(Math.random()*Ze.length)]}&random=${Math.random()}`]:[],G=await t(g,`${$}

${W}`,z,D);p.push(G)}catch($){console.error("Error creating scheduled post:",$);continue}}}if(p.length===0)throw new Error("Failed to schedule any posts");return _(`Successfully scheduled ${p.length} posts`),p}catch(c){const r=c instanceof Error?c.message:"Failed to schedule automated posts";throw u(r),C(r),c}finally{m(!1)}},isScheduling:h,error:n}}const Ja={twitter:{clientId:"your_twitter_client_id",redirectUri:"http://localhost:3000/auth/callback",scope:"tweet.read tweet.write users.read follows.read"},facebook:{clientId:"your_facebook_client_id",redirectUri:"http://localhost:3000/auth/callback",scope:"pages_show_list,pages_read_engagement,pages_manage_posts"},instagram:{clientId:"your_instagram_client_id",redirectUri:"http://localhost:3000/auth/callback",scope:"instagram_basic,instagram_content_publish"},linkedin:{clientId:"your_linkedin_client_id",redirectUri:"http://localhost:3000/auth/callback",scope:"r_liteprofile w_member_social"}};async function Ya(t){const a=Ja[t];if(!a)throw new Error(`Unsupported platform: ${t}`);if(!a.clientId)throw new Error("Social media integration is not configured. Please set up your OAuth credentials.");try{sessionStorage.setItem("connecting_platform",t);const s=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",s);const h=new URLSearchParams({client_id:a.clientId,redirect_uri:a.redirectUri,scope:a.scope,response_type:"code",state:s});window.location.href=`https://${t}.com/oauth/authorize?${h.toString()}`}catch(s){throw console.error("Error initiating social connection:",s),new Error("Failed to connect account. Please check your configuration and try again.")}}function Xa({onSuccess:t,onError:a}){const[s,h]=o.useState(!1),[m,n]=o.useState(null),[u,x]=o.useState(null),d=async l=>{try{h(!0),x(l),n(null),await Ya(l),t==null||t()}catch(g){const j=g instanceof Error?g.message:"Failed to connect account";console.error("Error connecting account:",g),n(j),a==null||a(new Error(j))}finally{h(!1),x(null)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(is,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"Connect Social Accounts"})]}),m&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4 mb-4 flex items-start gap-2",children:[e.jsx(F,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Connection Error"}),e.jsx("p",{className:"text-sm mt-1",children:m})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>d("twitter"),disabled:s,className:`flex items-center gap-3 p-4 rounded-lg transition-colors ${s&&u==="twitter"?"bg-primary-600/30 cursor-not-allowed":"bg-primary-600/50 hover:bg-primary-600"}`,children:[e.jsx(ns,{className:"w-5 h-5 text-[#1DA1F2]"}),e.jsx("span",{className:"text-white",children:s&&u==="twitter"?"Connecting...":"Connect Twitter"})]}),e.jsxs("button",{onClick:()=>d("facebook"),disabled:s,className:`flex items-center gap-3 p-4 rounded-lg transition-colors ${s&&u==="facebook"?"bg-primary-600/30 cursor-not-allowed":"bg-primary-600/50 hover:bg-primary-600"}`,children:[e.jsx(ls,{className:"w-5 h-5 text-[#4267B2]"}),e.jsx("span",{className:"text-white",children:s&&u==="facebook"?"Connecting...":"Connect Facebook"})]}),e.jsxs("button",{onClick:()=>d("instagram"),disabled:s,className:`flex items-center gap-3 p-4 rounded-lg transition-colors ${s&&u==="instagram"?"bg-primary-600/30 cursor-not-allowed":"bg-primary-600/50 hover:bg-primary-600"}`,children:[e.jsx(cs,{className:"w-5 h-5 text-[#E1306C]"}),e.jsx("span",{className:"text-white",children:s&&u==="instagram"?"Connecting...":"Connect Instagram"})]}),e.jsxs("button",{onClick:()=>d("linkedin"),disabled:s,className:`flex items-center gap-3 p-4 rounded-lg transition-colors ${s&&u==="linkedin"?"bg-primary-600/30 cursor-not-allowed":"bg-primary-600/50 hover:bg-primary-600"}`,children:[e.jsx(os,{className:"w-5 h-5 text-[#0077B5]"}),e.jsx("span",{className:"text-white",children:s&&u==="linkedin"?"Connecting...":"Connect LinkedIn"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 mt-4 text-sm text-primary-300",children:[e.jsx(F,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Connecting your social media accounts allows us to post content on your behalf. You can revoke access at any time from your account settings."})]})]})}function Za(){const{accounts:t=[],posts:a=[],loading:s,error:h,addAccount:m,createPost:n}=wt(),{scheduleAutomatedPosts:u,isScheduling:x}=Ga(),[d,l]=o.useState(!1),[g,j]=o.useState(!1),[c,r]=o.useState(!1),[i,f]=o.useState(null),[p,y]=o.useState(null),[N,w]=o.useState(7),[b,k]=o.useState(2),[E,D]=o.useState("marketing, business, technology"),[$,W]=o.useState(!0),[z,G]=o.useState(!0);if(s)return e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsx(Ve,{size:32})});if(h)return e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4 max-w-md text-center",children:[e.jsx(F,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Failed to load social media data"}),e.jsx("p",{className:"text-sm mt-1",children:h})]})});const fe=async v=>{try{await u(v,{duration:N,postsPerDay:b,topics:E.split(",").map(U=>U.trim()),includeImages:$,includeHashtags:z}),r(!1)}catch(U){console.error("Failed to schedule posts:",U),y("Failed to schedule posts. Please try again.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ge,{}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Social Media"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>l(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Connect Accounts"]}),t.length>0&&e.jsxs("button",{onClick:()=>j(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Create Post"]})]})]}),p&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4",children:p}),t.length>0?e.jsx("div",{className:"grid gap-4",children:t.map(v=>e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-white",children:v.account_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-primary-400 capitalize",children:v.platform}),e.jsx("button",{onClick:()=>{f(v.id),r(!0)},disabled:x,className:"ml-4 px-3 py-1 text-sm bg-primary-600/50 hover:bg-primary-600 text-primary-200 rounded-lg transition-colors",children:x&&i===v.id?"Scheduling...":"Auto Schedule"})]})]},v.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(le,{className:"w-12 h-12 text-primary-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Connected Accounts"}),e.jsx("p",{className:"text-primary-300 mb-6",children:"Connect your social media accounts to start managing your posts."}),e.jsx("button",{onClick:()=>l(!0),className:"btn-primary py-2 px-6",children:"Connect Account"})]}),a.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Recent Posts"}),e.jsx("div",{className:"grid gap-4",children:a.map(v=>e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-4 space-y-3",children:[e.jsx("p",{className:"text-primary-200",children:v.content}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-primary-400",children:new Date(v.created_at).toLocaleDateString()}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${v.status==="published"?"bg-green-500/20 text-green-400":v.status==="scheduled"?"bg-blue-500/20 text-blue-400":"bg-primary-600/50 text-primary-300"}`,children:v.status})]})]},v.id))})]}),d&&e.jsx(Xa,{onSuccess:()=>{l(!1),y(null)},onError:v=>{y(v.message)}}),c&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-primary-700 rounded-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Auto Schedule Settings"}),e.jsx("button",{onClick:()=>r(!1),className:"text-primary-300 hover:text-white",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-1",children:"Duration (days)"}),e.jsx("input",{type:"number",value:N,onChange:v=>w(parseInt(v.target.value)),min:"1",max:"30",className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-1",children:"Posts per Day"}),e.jsx("input",{type:"number",value:b,onChange:v=>k(parseInt(v.target.value)),min:"1",max:"5",className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200 mb-1",children:"Topics (comma-separated)"}),e.jsx("input",{type:"text",value:E,onChange:v=>D(v.target.value),className:"w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-primary-200",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:v=>W(v.target.checked),className:"rounded border-primary-500"}),"Include Images"]}),e.jsxs("label",{className:"flex items-center gap-2 text-primary-200",children:[e.jsx("input",{type:"checkbox",checked:z,onChange:v=>G(v.target.checked),className:"rounded border-primary-500"}),"Include Hashtags"]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 text-primary-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>fe(i),disabled:x,className:"btn-primary py-2 px-6",children:x?"Scheduling...":"Start Scheduling"})]})]})]})})]})}function Qa(){const{user:t}=T(),[a,s]=o.useState([]),[h,m]=o.useState([]),[n,u]=o.useState(!0),[x,d]=o.useState(null);o.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{u(!0),d(null);const[r,i]=await Promise.all([O(()=>S.from("marketing_budgets").select("*").eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1})),O(()=>S.from("marketing_expenses").select("*").eq("user_id",t==null?void 0:t.id).order("date",{ascending:!1}))]);if(r.error)throw r.error;if(i.error)throw i.error;s(r.data||[]),m(i.data||[])}catch(r){console.error("Error loading budget data:",r),d("Failed to load budget data"),C("Failed to load budget data. Please try again.")}finally{u(!1)}},g=r=>{const i=new Date,f=new Date(i.getFullYear(),i.getMonth(),1),p=new Date(f);switch(r){case"monthly":p.setMonth(p.getMonth()+1);break;case"quarterly":p.setMonth(p.getMonth()+3);break;case"yearly":p.setFullYear(p.getFullYear()+1);break;default:throw new Error("Invalid period")}return p.setDate(p.getDate()-1),{period_start:f.toISOString().split("T")[0],period_end:p.toISOString().split("T")[0]}};return{budgets:a,expenses:h,loading:n,error:x,addBudget:async(r,i,f)=>{try{const{period_start:p,period_end:y}=g(f),{data:N,error:w}=await O(()=>S.from("marketing_budgets").insert({category:r,amount:i,period:f,period_start:p,period_end:y,user_id:t==null?void 0:t.id}).select().single());if(w)throw w;return s(b=>[N,...b]),_("Budget added successfully"),N}catch(p){throw console.error("Error adding budget:",p),C("Failed to add budget. Please try again."),p}},addExpense:async(r,i,f,p)=>{try{const{data:y,error:N}=await O(()=>S.from("marketing_expenses").insert({category:r,amount:i,description:f,date:p.toISOString().split("T")[0],user_id:t==null?void 0:t.id}).select().single());if(N)throw N;return m(w=>[y,...w]),_("Expense added successfully"),y}catch(y){throw console.error("Error adding expense:",y),C("Failed to add expense. Please try again."),y}},refresh:l}}const Qe=["#f97316","#3b82f6","#10b981","#8b5cf6","#f59e0b"];function er({budgets:t,expenses:a,onInsightGenerated:s}){var w;const{optimizeMarketingBudget:h}=me(),[m,n]=o.useState(!1),[u,x]=o.useState(null),[d,l]=o.useState(null),g=t.reduce((b,k)=>b+k.amount,0),j=a.reduce((b,k)=>b+k.amount,0),c=g>0?j/g*100:0,r=async()=>{try{n(!0),x(null);const b=await h(g,["Maximize ROI","Optimize allocation","Predict trends"]);l(b),s==null||s(b)}catch(b){console.error("Analysis error:",b),x("Failed to analyze budget data")}finally{n(!1)}},i=t.map(b=>({name:b.category,value:b.amount})),f=[{name:"Used",value:j},{name:"Remaining",value:Math.max(0,g-j)}],y=(()=>{const b=["Jan","Feb","Mar","Apr","May","Jun"],k=j/6;return b.map(E=>({name:E,actual:k*(.9+Math.random()*.2),predicted:k*(1+Math.random()*.3)}))})(),N=a.map(b=>({category:b.category,amount:b.amount,roi:(Math.random()*2+1)*b.amount}));return e.jsxs("div",{className:"space-y-6",children:[u&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 rounded-lg p-4 flex items-start gap-2",children:[e.jsx(F,{className:"w-5 h-5 mt-0.5"}),e.jsx("span",{children:u})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"ROI Analysis"})]}),e.jsxs("button",{onClick:r,disabled:m,className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),m?"Analyzing...":"Analyze ROI"]})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(Be,{data:N,children:[e.jsx(K,{dataKey:"category",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8"}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(De,{name:"Spent",dataKey:"amount",fill:"#3b82f6"}),e.jsx(De,{name:"Return",dataKey:"roi",fill:"#f97316"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(te,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"Budget Allocation"})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(xe,{children:[e.jsx(he,{data:i,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:i.map((b,k)=>e.jsx(oe,{fill:Qe[k%Qe.length]},b.name))}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}})]})})})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Te,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"Budget Utilization"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary-300",children:"Utilization Rate"}),e.jsxs("span",{className:"text-white font-medium",children:[c.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 bg-primary-600 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-500 transition-all duration-500",style:{width:`${c}%`}})})]}),e.jsx("div",{className:"h-48",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(xe,{children:[e.jsxs(he,{data:f,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,label:!0,children:[e.jsx(oe,{fill:"#f97316"}),e.jsx(oe,{fill:"#3b82f6"})]}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}})]})})})]})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"AI-Powered Predictions"})]}),e.jsx("div",{className:"h-64",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(se,{data:y,children:[e.jsx(K,{dataKey:"name",stroke:"#94a3b8"}),e.jsx(B,{stroke:"#94a3b8"}),e.jsx(R,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"0.5rem",color:"#fff"}}),e.jsx(Z,{type:"monotone",dataKey:"actual",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6"},name:"Actual Spend"}),e.jsx(Z,{type:"monotone",dataKey:"predicted",stroke:"#f97316",strokeWidth:2,dot:{fill:"#f97316"},name:"Predicted Spend"})]})})})]}),d&&e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"AI Insights"})]}),e.jsx("div",{className:"grid gap-4",children:(w=d.recommendations)==null?void 0:w.map((b,k)=>e.jsxs("div",{className:"flex items-start gap-3 bg-primary-600/50 rounded-lg p-4",children:[e.jsx(A,{className:"w-5 h-5 text-accent-500 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-white",children:b})})]},k))})]})]})}function tr(){const{budgets:t,expenses:a,loading:s,error:h,addBudget:m,addExpense:n}=Qa(),[u,x]=o.useState(!1),[d,l]=o.useState(!1),[g,j]=o.useState(""),[c,r]=o.useState(""),[i,f]=o.useState("monthly"),[p,y]=o.useState(""),[N,w]=o.useState(""),[b,k]=o.useState(""),[E,D]=o.useState(""),$=async v=>{v.preventDefault();try{await m(g,parseFloat(c),i),x(!1),j(""),r(""),f("monthly")}catch(U){console.error("Error adding budget:",U)}},W=async v=>{v.preventDefault();try{await n(p,parseFloat(N),b,new Date(E)),l(!1),y(""),w(""),k(""),D("")}catch(U){console.error("Error adding expense:",U)}};if(s)return e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsx(Ve,{size:32})});if(h)return e.jsx(jt,{title:"Error Loading Budget Data",message:h,icon:e.jsx(F,{className:"w-12 h-12 text-red-500 mx-auto mb-4"})});const z=t.reduce((v,U)=>v+U.amount,0),G=a.reduce((v,U)=>v+U.amount,0),fe=Math.max(0,z-G);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ge,{}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Budget Management"}),e.jsx($e,{feature:"Budget Analytics"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>x(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Add Budget"]}),e.jsxs("button",{onClick:()=>l(!0),className:"btn-primary py-2 px-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Add Expense"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(te,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Total Budget"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",z.toLocaleString()]})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Te,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Total Expenses"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",G.toLocaleString()]})]}),e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-5 h-5 text-accent-500"}),e.jsx("h3",{className:"text-sm font-medium text-primary-200",children:"Remaining Budget"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",fe.toLocaleString()]})]})]}),e.jsx(er,{budgets:t,expenses:a,onInsightGenerated:v=>{console.log("AI Insights:",v)}}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-primary-700 rounded-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Add Budget"}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 text-primary-300 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Category"}),e.jsx("input",{type:"text",value:g,onChange:v=>j(v.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Amount"}),e.jsx("input",{type:"number",value:c,onChange:v=>r(v.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Period"}),e.jsxs("select",{value:i,onChange:v=>f(v.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-primary-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary py-2 px-6",children:"Add Budget"})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-primary-700 rounded-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Add Expense"}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 text-primary-300 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Category"}),e.jsxs("select",{value:p,onChange:v=>y(v.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),t.map(v=>e.jsx("option",{value:v.category,children:v.category},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Amount"}),e.jsx("input",{type:"number",value:N,onChange:v=>w(v.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Description"}),e.jsx("input",{type:"text",value:b,onChange:v=>k(v.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-200",children:"Date"}),e.jsx("input",{type:"date",value:E,onChange:v=>D(v.target.value),className:"mt-1 block w-full rounded-lg bg-primary-600 border-primary-500 text-white px-4 py-2",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-primary-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary py-2 px-6",children:"Add Expense"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Budgets"}),e.jsx("div",{className:"grid gap-4",children:t.map(v=>e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:v.category}),e.jsxs("p",{className:"text-sm text-primary-300",children:["$",v.amount.toLocaleString()," (",v.period,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-primary-300 hover:text-white transition-colors",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-primary-300 hover:text-red-400 transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]},v.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Recent Expenses"}),e.jsx("div",{className:"grid gap-4",children:a.map(v=>e.jsxs("div",{className:"bg-primary-700/50 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:v.category}),e.jsx("p",{className:"text-sm text-primary-300",children:v.description})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-medium",children:["$",v.amount.toLocaleString()]}),e.jsx("p",{className:"text-sm text-primary-300",children:new Date(v.date).toLocaleDateString()})]}),e.jsx("button",{className:"p-2 text-primary-300 hover:text-red-400 transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]},v.id))})]})]})}function re({children:t}){const{user:a,loading:s}=T(),h=we();return o.useEffect(()=>{!s&&!a&&h("/login",{replace:!0})},[a,s,h]),s?e.jsx("div",{className:"min-h-screen bg-primary-800 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-accent-500"})}):a?e.jsx(e.Fragment,{children:t}):null}function ie({title:t="Something went wrong",message:a,onRetry:s}){return e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(F,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:t}),e.jsx("p",{className:"text-primary-300 mb-4 max-w-md",children:a}),s&&e.jsx("button",{onClick:s,className:"btn-primary",children:"Try Again"})]})}function sr(){const{user:t}=T();return e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:e.jsxs(kt,{children:[e.jsx(q,{path:"/",element:t?e.jsx(ke,{to:"/dashboard"}):e.jsx(ha,{})}),e.jsx(q,{path:"/login",element:t?e.jsx(ke,{to:"/dashboard"}):e.jsx(ma,{})}),e.jsx(q,{path:"/signup",element:t?e.jsx(ke,{to:"/dashboard"}):e.jsx(xa,{})}),e.jsx(q,{path:"/auth/callback",element:e.jsx(Ia,{})}),e.jsx(q,{path:"/dashboard",element:e.jsx(re,{children:e.jsx(Y,{fallback:e.jsx(ie,{message:"Failed to load dashboard"}),children:e.jsx(Da,{})})})}),e.jsx(q,{path:"/analytics",element:e.jsx(re,{children:e.jsx(Y,{fallback:e.jsx(ie,{message:"Failed to load analytics"}),children:e.jsx(bt,{})})})}),e.jsx(q,{path:"/customers",element:e.jsx(re,{children:e.jsx(Y,{fallback:e.jsx(ie,{message:"Failed to load customer management"}),children:e.jsx(yt,{})})})}),e.jsx(q,{path:"/seo",element:e.jsx(re,{children:e.jsx(Y,{fallback:e.jsx(ie,{message:"Failed to load SEO tracking"}),children:e.jsx(Oa,{})})})}),e.jsx(q,{path:"/email",element:e.jsx(re,{children:e.jsx(Y,{fallback:e.jsx(ie,{message:"Failed to load email campaigns"}),children:e.jsx(Ha,{})})})}),e.jsx(q,{path:"/social",element:e.jsx(re,{children:e.jsx(Y,{fallback:e.jsx(ie,{message:"Failed to load social media dashboard"}),children:e.jsx(Za,{})})})}),e.jsx(q,{path:"/budget",element:e.jsx(re,{children:e.jsx(Y,{fallback:e.jsx(ie,{message:"Failed to load budget manager"}),children:e.jsx(tr,{})})})}),e.jsx(q,{path:"*",element:e.jsx(ke,{to:"/",replace:!0})})]})}),e.jsx(ut,{position:"top-right"})]})}ot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Y,{children:e.jsx(Ct,{children:e.jsxs(da,{children:[e.jsx(sr,{}),e.jsx(ut,{position:"top-right"})]})})})}));
//# sourceMappingURL=index-CN-0unQL.js.map
